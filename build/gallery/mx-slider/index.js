import Magix from"../../lib/magix.js";import Dragdrop from"../mx-dragdrop/index.js";Magix.applyStyle("xlb",'[mx-view*="/mx-slider/index"]{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xl-N{height:4px;border-radius:2px}.xl-O,.xl-N{background:#fff;cursor:pointer}.xl-O{width:8px;height:8px;border-radius:50%;position:absolute;top:-2px;margin-left:-4px;box-shadow:0 0 0 2px hsla(0,0%,100%,.4)}.xl-P{background:#88cbfb;position:absolute;top:0}.xl-Q,.xl-P{height:4px;border-radius:2px}.xl-Q{background:#999}');export default Magix.View.extend({tmpl:(e,t,i,s)=>{let l,r,a=[],{id:o,buffer:d,bufferValue:n,value:x}=e;return l=[],d&&(r=[t("div",{class:"xl-Q",style:"width:"+s(100*n)+"%"})],l.push(...r)),l.push(t("div",{class:"xl-P",style:"width:"+s(100*x)+"%"})),a.push(t("div",{class:"xl-N",id:"t_"+s(o),"mx-click":i+"\x1e_k()"},l),t("div",{class:"xl-O",style:"left:"+s(100*x)+"%","mx-mousedown":i+"\x1e_l()"})),t(i,0,a)},mixins:[Dragdrop],init(e){this.assign(e)},assign(e){return!this._j&&(this.set(e),!0)},render(){this.digest()},"_k<click>"(e){let t=e.eventTarget.getBoundingClientRect(),i=(e.pageX-t.left)/t.width;this.digest({value:i}),Magix.dispatch(this.root,"change",{percent:i})},"_l<mousedown>"(e){let t=Magix.node("t_"+this.id).getBoundingClientRect(),i=this.get("value")||0;this._j=1,this._e(e,s=>{let l=(s.pageX-e.pageX)/t.width+i;l>1?l=1:l<0&&(l=0),this.digest({value:l}),Magix.dispatch(this.root,"update",{percent:l})},()=>{Magix.dispatch(this.root,"change",{percent:this.get("value")}),delete this._j})}});