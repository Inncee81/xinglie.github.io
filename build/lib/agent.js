/*!1.0.2 kooboy_li@163.com*/
let e=[{_l:"https://api.codetabs.com/v1/proxy?quest=",_m:1},{_l:"https://cors-anywhere.herokuapp.com/",_m:0},{_l:"https://jsonp.afeld.me/?url=",_m:1},{_l:"https://proxy.hackeryou.com/?reqUrl=",_m:1}];export default{request:(t,l,a)=>new Promise((o,r)=>{let c=0,s=async()=>{let i=[t,l].join("\0");if(l){let e=localStorage.getItem(i);if(e){let t=JSON.parse(e);if(t.expire>Date.now())return o(t.data)}}if(c<e.length){let r=t;if(a){let l=e[c];r=l._l,l._m?r+=encodeURIComponent(t):r+=t}try{let e=await fetch(r);if(e.ok){let t=await e.text();if(l)try{localStorage.setItem(i,JSON.stringify({data:t,expire:l+Date.now()}))}catch(e){localStorage.clear()}o(t)}else c++,s()}catch(e){c++,s()}}else r("no server to request:"+t)};s()}),clear(e,t){let l=[e,t].join("\0");localStorage.removeItem(l)}};