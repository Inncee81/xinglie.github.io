let e=0,t=[],r=window,i=document,n=r.setTimeout,l=encodeURIComponent;function o(){}let a,s=i.head,f=r.performance,d=f.now.bind(f),u="prototype",h=Object[u].toString,c=e=>h.call(e).slice(8,-1),p=e=>"Object"==c(e),b=Array.isArray,m=t=>(t||"_")+e++,g=e=>i.getElementById(e),w=(e,t)=>e.innerHTML=t,y={rootId:m(),error(e){throw e}},k=e=>!e||"object"!=typeof e,v=(e,t,r)=>{if(e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},$=e=>{e["\x1ea"]=null},{assign:j,keys:x,hasOwnProperty:I}=Object,E=s.getAttribute,T=(e,t)=>E.call(e,t),A=(e,t,r)=>{t&&!A[e]&&(A[e]=1,r=i.createElement("style"),w(r,t),s.appendChild(r))},B=(e,t,r,i)=>{try{i=b(t)?e.apply(r,t):e.call(r,t)}catch(e){y.error(e)}return i},C=(e,t)=>e&&I.call(e,t),P=(e,t)=>{let r,i;if(k(t))"\x1e"==(r=t+"")[0]&&(t=e[r]);else for(r in t)i=t[r],i=P(e,i),t[r]=i;return t},M=(e,t)=>t.a-e.a;function N(e,t,r){(r=this).a=[],r.b=t||5,r.c=r.b+(e||20)}j(N[u],{get(e){let t=this.a["\x1e"+e];return t&&(t.a++,t=t.c),t},set(e,t){let r=this,i=r.a,n="\x1e"+e,l=i[n],o=r.b;if(!l){if(i.length>=r.c)for(i.sort(M);o--;)(l=i.pop()).a>0&&r.del(l.o);l={d:e},i.push(l),i[n]=l}l.c=t,l.a=1},del(e){e="\x1e"+e;let t=this.a,r=t[e];r&&(r.a=-1,r.c="",t[e]=null)},has(e){return C(this.a,"\x1e"+e)}});let O={bubbles:!0,cancelable:!0},_=[],L=(e,t,r,i,n,l)=>{let o={a:n,b:r,c:t,d:e,e(e){n?B(r,e,l):r(e)}};_.push(o),e.addEventListener(t,o.e,i)},S=(e,t,r,i,n)=>{for(let l,o=_.length;o--;)if((l=_[o]).c==t&&l.a==n&&l.d==e&&l.b===r){_.splice(o,1),e.removeEventListener(t,l.e,i);break}},U=new N,V=(e,t=1,r)=>(t&&U.has(e)?r=U.get(e):(r=B(Function(`return ${e}`)),t&&U.set(e,r)),r),R=decodeURIComponent,F=new N,H=e=>{let t,r,i,n,l,o,a=F.get(e);if(!a){if(n={},-1==(l=e.indexOf("?"))?(t=e,o=""):(t=e.substring(0,l),o=e.substring(l+1)),o)for(l of o.split("&"))[r,i]=l.split("="),n[R(r)]=R(i||"");F.set(e,a={a:t,b:n})}return{path:a.a,params:j({},a.b)}},W=new N,q=(e,t,r)=>(W.has(e)?r=W.get(e):(r=V(e,0),e.includes("\x1e")?P(t,r):W.set(e,r)),r),D=0,z=[],G=()=>{let e,t,r,i=d();try{for(;;){if(e=z[D],r=z[D-1],t=z[D+1],z[D]=null,z[D-1]=null,z[D+1]=null,z[D+2]=null,D+=4,!e){z.length=D=0;break}if(e!=o&&(b(t)?e.apply(r,t):e.call(r,t)),d()-i>8&&z.length>D){n(G);break}}}catch(e){y.error(e),n(G)}},J=(e,t,r,i)=>{if(D||(D=1,n(G)),i)for(let e=z.length-1;e>=D;e-=4)z[e]==i&&(z[e-3]=null,z[e-2]=o,z[e-1]=null,z[e]=null);z.push(r,e,t,i)},K={},Q=async(e,t)=>{if(e){b(e)||(e=[e]);let r,i,n,l=[],o=[],a=y.paths;for(r of e)(i=r.indexOf("/"))>-1&&!r.startsWith(".")&&(n=r.slice(0,i),r=r.slice(i+1),r=a[n]+r),r.endsWith(".js")||(r+=".js"),K[r]||(K[r]=import(r)),l.push(K[r]);try{for(r of e=await Promise.all(l))o.push(r.default)}catch(e){}J(t,o)}else J(t)},X=(e,t,r,i)=>(o[u]=t[u],i=new o,j(i,r),i.constructor=e,e[u]=i,e),Y=e=>e;let Z,ee,te={fire(e,t){let r,i,n=this,l=n["\x1e"+e],o=0;if(t||(t={}),t.type=e,l)for(r=l.length;o<r;o++)(i=l[o]).a?(i.b=1,B(i.a,t,n),i.b=""):i.b||(l.splice(o--,1),r--);(l=n[`on${e}`])&&B(l,t,n)},on(e,t){let r="\x1e"+e;(this[r]||(this[r]=[])).push({a:t})},off(e,t){let r,i="\x1e"+e,n=this,l=n[i];if(t){if(l)for(r of l)if(r.a==t){r.a="";break}}else n[i]=null,n[`on${e}`]=null}},re={},ie=(e,t,r,i)=>{t.includes("\x1e")&&(i=re[e])&&P(i.a,r)},ne=(e,t)=>{C(re,e)||(re[e]=t)},le=(e,t,r,i,n,l,o)=>{for(t=e.c,n=e.d;t.length;)[r,o,i]=t.shift(),J(i,(l=n[r])&&B(l,o,n))},oe=(e,t)=>{let r,i,n;for(r in e.b)(n=t?(i=re[r])&&v(i.root,t):1)&&e.unmount(r,1)},ae=e=>{let{d:t,root:r}=e;e.c=[],t&&(e.d=0,t.a&&(t.a=0,$(t),oe(e),t.fire("destroy"),tt(t,1),r&&e.f&&w(r,e.g))),e.h++},se=(e,t,r)=>{let i,n,l,o,{id:a,root:s,pId:f}=e;!e.f&&s&&(e.f=1,e.g=s.innerHTML),ae(e),s&&t&&(i=H(t),l=i.path,e.path=t,o=i.params,ie(f,t,o),e.i=l,(f=o["\x1e"])&&p(f)?o=f:j(o,r),n=e.h,Q(l,t=>{n==e.h&&(t?(st(t),l=new t(a,s,e,o),e.d=l,tt(l),B(l.init,o,l),J(l.f,o,l),J(()=>{l.g(),l.tmpl||l.h||et(l)})):y.error(Error(`${a} cannot load:${l}`)))}))},fe=e=>e.b||(e.b=m(ee));function de(e,t){let r=this,i=fe(e);r.id=i,r.root=e,r.h=1,r.b={},r.pId=t,r.c=[],r.a={},ne(i,r)}j(de,{root:()=>Z,all:()=>re,byId:e=>re[e],byNode:e=>re[e.b]}),j(de[u],{mount(e,t,r){let i,n=this,l=n.id,o=n.b,a=fe(e);return(i=re[a])||(C(o,a)||(n.j=0),o[a]=a,i=new de(e,l)),se(i,t,r),i},unmount(e,t){let r,i;var n,l,o;e=e?this.b[t?e:e.b]:this.id,(r=re[e])&&(ae(r),i=r.pId,(l=re[n=e])&&(delete re[n],(o=l.root).a=0,o.b=0,l.id=l.root=l.pId=l.b=null),(r=re[i])&&C(r.b,e)&&(delete r.b[e],r.j=0))},children(e){return(e=this).j||(e.j=x(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=re[t.pId];return t},invoke(e,t){let r,i,n=this,l=n.c;return new Promise(o=>{(r=n.d)&&r.h?o((i=r[e])&&B(i,t,r)):l.push([e,t,o])})}});let ue=new N(30,10),he=/([\w\-]+)\x1e(\x1e)?([^(]+)\(([\s\S]*?)\)/,ce={},pe={},be={},me={},ge={},we={},ye={capture:!0},ke={passive:!1},ve={passive:!1,capture:!0};let $e=(e,r)=>{let i,n,l,o,s,f,d,u,h=[],c=e,p=T(e,"mx5-"+r),b=0;if(p&&((s=ue.get(p))||(s={v:(s=p.match(he)||t)[1],t:s[2],n:s[3],i:s[4]},ue.set(p,s)),s=j({},s)),s&&!s.v||ge[r]){if(""!==(u=c.c)){for(d=[c];c!=a&&(c=c.parentNode);){if(re[n=c.b]||(n=c.c)){u=n;break}d.push(c)}for(p of d)p.c=u||""}if(c=e.b,re[c]&&(b=u=c),u)do{if((i=re[u])&&(f=i.d)){if(o=(l=f.i)[r])for(c=o.length;c--;)l={r:n=o[c],v:u,n:n},n?!b&&e.matches(n)&&h.push(l):b&&h.push(l);if(f.tmpl&&!b)break;b=0}}while(i&&(u=i.pId))}return s&&h.push(s),h},je=e=>{let t,r,i,n,l,o,s,{target:f,type:d}=e,u=[];for(;f&&1==f.nodeType&&f!=a&&!(e.cancelBubble||(r=f.d)&&r[d]);){if(r=1,u.push(f),(t=$e(f,d)).length)for(o of(u.length=0,t)){let{v:t,n:a,i:u,t:h}=o;if(!(n=(i=re[t])&&i.d)){0;break}n.h&&n.a&&((o=n[l=a+"\x1e"+d])&&(e.eventTarget=f,s=u?q(u,i.a):we,e.params=s,B(o,e,n)),h||f==n.root||ge[d]||(f=n.root,r=0))}r&&((i=f.b)&&(n=(i=re[i])&&i.d)&&n.j[d]&&(u.length=0),f=f.parentNode)}for(f of u)(r=f.d||(f.d={}))[d]=1},xe=(e,t,r,i)=>{let n=0|ce[e],l=0|be[e],o=0|me[e],s=r?-1:1,f=r?S:L;4&i&&(l+=s,be[e]=l),8&i&&(o+=s,me[e]=o);let d,u=pe[e];l&&o?d=ve:l?d=ke:o&&(d=ye),n&&r!==n?d!=u&&(S(a,e,je,u),L(a,e,je,d)):f(a,e,je,r?u:d),pe[e]=d,ce[e]=n+s,t&&(ge[e]=(0|ge[e])+s)};let Ie={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},Ee=/[&<>"'\`]/g,Te=e=>null==e?"":""+e,Ae=e=>Ie[e],Be=e=>Te(e).replace(Ee,Ae),Ce={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Pe=e=>Ce[e],Me=/[!')(*]/g,Ne=e=>l(Te(e)).replace(Me,Pe),Oe=/[\\'"]/g,_e=e=>Te(e).replace(Oe,"\\$&"),Le=(e,t,r)=>(e[r]=t,r),Se=(e,r,i)=>{if(e.a&&(i=e.tmpl)){let r,n=e.k,l=e.id,o=re[l],a={a:[],b:0},s=e.d,f=o.a;e.l=0,e.k={},r=i(s,Ve,l,Te,Ne,f,Le,_e,b);let d=()=>{if(e.a)for(r of((i=a.c||!e.h)&&et(e),a.a))J(r.g,t,r,"\x1e"+r.id)},u=()=>{if(e.m=r,e.n>1)e.n=1,d(),Se(e);else{for(r of(e.n=0,d(),n=e.o))r();n.length=0}};J(Qe,[e.root,e.m,r,a,o,n,e,u])}},Ue={},Ve=(e,t,r,i)=>{let n;if(e){t=t||Ue;let l,o,a,s,f,d="",u=1==r,h={},c=0,p="<"+e,b="",m="",g=[],w=0;if(r&&1!=r)for(s of r){if(a=s.a,s.b==Fe){if(!a)continue;a=Be(a)}m+=a,f&&s.b==Fe&&f.b==Fe?f.a+=s.a:(s.d&&(h[s.d]=(h[s.d]||0)+1,c++),l=l||s.e,f=s,g.push(s))}for(o in i=i||Ue,t)!1!==(a=t[o])&&null!=a?(!0===a&&(t[o]=a=i[o]?a:""),"id"==o||"mx5-key"==o?d=a:"_"!=o||d?"mx5-view"==o&&a&&(w=1,d||(d=e+"\x1e"+H(a).path)):d=a,"value"==o&&"textarea"==e?(m=a,b+=a):C(Re,o)||(p+=` ${o}="${a&&Be(a)}"`)):i[o]||delete t[o];b+=p,n={a:p+=u?"/>":`>${m}</${e}>`,c:m,d:d,b:e,f:w,e:l||t.$,g:i,h:b,i:t,j:g,k:h,l:c,m:u}}else n={b:r?"\x1e":Fe,a:t+""};return n},Re={_:1,$:1,"mx5-key":1};let Fe=e;let He="http://www.w3.org/",We={svg:`${He}2000/svg`,math:`${He}1998/Math/MathML`},qe=(e,t,r)=>{let i,n,l,o=0,a=r.g,s=t.g,f=r.i,d=t.i;if(t)for(i in d)C(f,i)||(o=1,(l=s[i])?e[l]="":e.removeAttribute(i));for(i in f)C(Re,i)||(n=f[i],(l=a[i])?t&&e[l]==n||(o=1,e[l]=n):t&&d[i]==n||(o=1,e.setAttribute(i,n)));return o},De=(e,t)=>{let r,n=e.b;return n==Fe?r=i.createTextNode(e.a):(r=i.createElementNS(We[n]||t.namespaceURI,n),qe(r,0,e),w(r,e.c)),r},ze=(e,t,r,i,n)=>{let l,o,a,s={};for(l=i;l>=r;l--,n--)(a=(o=e[l]).d)&&(o=s[a]||(s[a]=[])).push(t[n]);return s},Ge=(e,t)=>e.d&&t.d==e.d||!e.d&&!t.d&&e.b==t.b||"\x1e"==t.b,Je=(e,t,r,i)=>{r&&((i=re.b)?i.unmount():oe(t,e))},Ke=(e,t,r,i,n)=>{Je(e,r,1==e.nodeType),t.removeChild(e),--i.b||J(n)},Qe=(e,t,r,i,n,l,o,a)=>{if(o.a)if(t){if(t.e||t.c!=r.c){let s,f,d,u,h,c=t.j,p=r.j,b=r.k,m=r.l,g=t.l,y=e.childNodes,k=0,v=c.length-1,$=0,j=p.length-1;0;let x,I=c[k],E=c[v],T=p[$],A=p[j],B=k,C=v;for(;k<=v&&$<=j;)if("\x1e"!=T.b&&"\x1e"!=A.b||(C=-1),I)if(E)if(Ge(I,T))i.b++,J(Xe,[y[B],e,I,T,i,n,l,o,a]),b[I.d]&&(b[I.d]--,m--,(u=h&&h[I.d])&&--h[I.d]),B++,I=c[++k],T=p[++$];else if(Ge(E,A))i.b++,J(Xe,[y[C],e,E,A,i,n,l,o,a]),b[E.d]&&(b[E.d]--,m--),C--,E=c[--v],A=p[--j];else if(Ge(I,A))f=y[B],e.insertBefore(f,y[C+1]),i.b++,J(Xe,[f,e,I,A,i,n,l,o,a]),b[I.d]&&(b[I.d]--,m--),C--,I=c[++k],A=p[--j];else if(Ge(T,E))f=y[C],e.insertBefore(f,y[B++]),i.b++,J(Xe,[f,e,E,T,i,n,l,o,a]),b[E.d]&&(b[E.d]--,m--),E=c[--v],T=p[++$];else{if(!h&&m>0&&g>0&&(h=ze(c,y,k,v,C)),x=y[B],(u=h&&h[T.d])&&(u=u.pop())){if(d=I,u!=x){for(f=k+1,s=B+1;f<=v;f++)if((d=c[f])&&y[s++]==u){c[f]=null;break}k--,e.insertBefore(u,x)}b[d.d]&&b[d.d]--,i.b++,J(Xe,[u,e,d,T,i,n,l,o,a])}else h&&h[I.d]&&b[I.d]||re[x.b]&&!T.f?(i.c=1,e.insertBefore(De(T,e),x),k--,C++):(i.b++,J(Xe,[x,e,I,T,i,n,l,o,a]));++B,I=c[++k],T=p[++$]}else E=c[--v];else I=c[++k];for(s=$,f=1;s<=j;s++,f++){if(d=p[s],i.c=1,"\x1e"==d.b){i.c=1,w(e,d.a);break}e.insertBefore(De(d,e),y[C+f])}for(s=B;s<=C;s++)i.c=1,i.b++,J(Ke,[y[s],e,n,i,a])}}else i.c=1,w(e,r.c);i.b||J(a)},Xe=(e,t,r,i,n,l,o,a,s)=>{if(a.a){0;let f=r.i,d=i.i;if(r.e||r.a!=i.a)if("\x1e"==i.b)n.c=1,w(t,i.a);else if(r.b==i.b){if(r.b==Fe)n.c=1,e.nodeValue=i.a;else if(!f._||f._!=d._){let t,u,h,c,p,b,m,g=d["mx5-view"],w=i.c,y=r.h!=i.h,k=re[e.b],v=g&&H(g);if(y&&(y=qe(e,r,i))&&(n.c=1),g&&k&&k.i==v.path&&(c=k.d)){if(b=w!=r.c,m=g!=k.path,h=f.$,!b&&!m&&h)for(h of p=h.split(","))if("#"==h||C(o,h)){m=1;break}(m||b)&&(h=c.f,p=v.params,ie(k.pId,g,p),k.path=g,k.g=w,!1!==B(h,p,c)&&n.a.push(c),t=!c.tmpl)}else t=1,u=k;u&&(n.c=1,k.unmount()),t&&!i.m&&Qe(e,r,i,n,l,o,a,s)}}else n.c=1,Je(e,l,1),t.replaceChild(De(i,t),e)}--n.b||J(s)},Ye=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Ze=(e,t,r)=>(e.a?r=e:((r=function(e,t){for(t of r.a)B(t,e,this)}).a=[e],r.b=1),r.a=r.a.concat(t.a||t),r),et=e=>{let t,r;e.a&&(r=e.h,e.h=1,((e,t,r,i)=>{for(r of(t=t||e.root).querySelectorAll(`[mx5-view][mx5-owner="${e.id}"]`))r.a||(r.a=1,e.mount(r,T(r,"mx5-view")))})(t=e.owner),r||J(le,t))},tt=(e,t)=>{let r,{j:i,i:n,p:l,id:o}=e;for(r in i)xe(r,n[r],t,i[r]);for(r of(i=t?S:L,l))i(r.a,r.b,r.c,r.d,o,e)},rt={win:r,doc:i,root:""};function it(...e){return j(this,...e),this}let nt=(e,t,r)=>{let i,n,l,o,a={};for(n of e)for(i in n)l=n[i],o=a[i],"ctor"!=i?(Ye.test(i)&&(o?l=Ze(o,l):l.b=1),a[i]=l):r.push(l);for(i in a)C(t,i)||(t[i]=a[i])};function lt(...e){let t=this.a||(this.a=[]);return nt(e,this[u],t),this}let ot=e=>(function(...t){return B(e,t,this)}),at=(e,t,r,i)=>{if(e)for(i of e)B(i,t,r)};let st=e=>{if(!e["\x1e"]){e["\x1e"]=1;let t,r,i,n,l,o,a,s,f,d,h,c=e[u],p={},b=[],m={};for(a in c)if(t=c[a],r=a.match(Ye))for(s of([,o,i,n,h]=r,d=h?V(h):we,n=n.split(","))){if(l=rt[i],f=1,!1===d.passive&&(f|=4),d.capture&&(f|=8),o){if(l){b.push({c:t,a:l,b:s,d:d});continue}""===l&&(i=""),f=2,(l=m[s])||(l=m[s]=[]),l[i]||(l[i]=1,l.push(i))}p[s]|=f,(l=c[s=i+"\x1e"+s])?l.b&&(t.b?c[s]=Ze(t,l):C(c,a)&&(c[s]=t)):c[s]=t}c.g=c.render=ot(c.render),c.j=p,c.p=b,c.i=m,c.f=c.assign}};function ft(e,t,r,i,n){(n=this).root=t,n.owner=r,n.id=e,n.a=1,n.l=1,n.d={},n.k={},n.n=0,n.o=[],at(ft.a,i,n)}j(ft,{merge:lt,extend:function e(t){let r=this,i=(t=t||{}).ctor;function n(e,t,l,o,a){r.call(a=this,e,t,l,o),i&&B(i,o,a),at(n.a,o,a)}return n.merge=lt,n.extend=e,n.static=it,X(n,r,t)}}),j(ft[u],te,{init:o,render:o,assign:o,get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let r,i,n,l=this,o=l.d,a=l.k,s=l.l;for(n in e)r=e[n],i=o[n],k(r)&&i==r||C(t,n)||(a[n]=1,s=1),o[n]=r;return l.l=s,l},digest(e,t){return e=this.set(e,t),new Promise(t=>{e.l?(e.n++,e.o.push(t),1==e.n&&Se(e,1)):e.n?e.o.push(t):t()})},finale(){let e=this;return new Promise(t=>{e.n?e.o.push(t):t()})}});let dt=0,ut={config:(e,t)=>(t=y,e&&(t=p(e)?j(t,e):t[e]),t),boot(e){dt||(dt=1,j(y,e),se(((e,t)=>(Z||(a=i.body,e=ee=y.rootId,(t=g(e))||(t=a),Z=new de(t)),Z))(),y.defaultView))},unboot(){dt&&Z&&(Z.unmount(),Z=null)},toMap:(e,t)=>{let r,i={};if(e)for(r of e)i[t&&r?r[t]:r]=t?r:1+(0|i[r]);return i},toTry:B,toUrl:(e,t,r)=>{let i,n,o,a=[];for(n in t)((i=t[n]+"")||C(r,n))&&(i=l(i),a.push(o=n+"="+i));return o&&(e+=(e&&(e.includes("?")?"&":"?"))+a.join("&")),e},parseUrl:H,guid:m,use:Q,dispatch:(e,t,r)=>{let i=new Event(t,O);j(i,r),e.dispatchEvent(i)},guard:Y,type:c,has:C,inside:v,applyStyle:A,Cache:N,View:ft,Vframe:de,Event:te,mark:(e,t,r,i,n)=>(null!==e[n="\x1ea"]&&(r=e[n]||(e[n]={}),C(r,t)||(r[t]=0),i=++r[t]),r=>(r=e[n],r&&i===r[t])),unmark:$,node:g,task:J,taskFinale:()=>new Promise(e=>{J(e)}),taskComplete(e){let t=0,r=0,i=(...i)=>{++r==t&&e(...i)};return(...e)=>{t++,J(i,[...e])}}};export default ut;