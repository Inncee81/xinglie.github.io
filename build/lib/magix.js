let e=0,t=[],r=window,i=document,n=r.setTimeout,o=encodeURIComponent;function a(){}let l=i.body,f=r.performance,s=f.now.bind(f),u="\x1e",d="prototype",h=Object[d].toString,c=e=>h.call(e).slice(8,-1),p=e=>"Object"==c(e),b=Array.isArray,m=t=>(t||"_")+e++,g=e=>i.getElementById(e),w=(e,t)=>e.innerHTML=t,v=m(),y={rootId:m(),defaultView:v,error(e){throw e}},x=e=>!e||"object"!=typeof e,k=(e,t,r)=>{if(e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},$=e=>{e[u+"b"]=0,e[u+"a"]=1},{assign:V,keys:j,hasOwnProperty:I}=Object,E=i.head,O=l.getAttribute,T=(e,t)=>O.call(e,t),U=(e,t,r)=>{t&&!U[e]&&(U[e]=1,r=i.createElement("style"),w(r,t),E.appendChild(r))},A=(e,r,i,n,o)=>{for(o of(b(e)||(e=[e]),b(r)||(r=r&&[r]||t),e))try{n=o&&o.apply(i,r)}catch(e){y.error(e)}return n},C=(e,t)=>e&&I.call(e,t),L=(e,t)=>{let r,i;if(x(t))(r=t+"")[0]==u&&(t=e[r]);else for(r in t)i=t[r],i=L(e,i),t[r]=i;return t},M=(e,t)=>t.a-e.a;function N(e,t,r){(r=this).a=[],r.b=t||5,r.c=r.b+(e||20)}V(N[d],{get(e){let t=this.a[u+e];return t&&(t.a++,t=t.c),t},set(e,t){let r=this,i=r.a,n=u+e,o=i[n],a=r.b;if(!o){if(i.length>=r.c)for(i.sort(M);a--;)(o=i.pop()).a>0&&r.del(o.o);o={d:e},i.push(o),i[n]=o}o.c=t,o.a=1},del(e){e=u+e;let t=this.a,r=t[e];r&&(r.a=-1,r.c="",t[e]=null)},has(e){return C(this.a,u+e)}});let Z,_={bubbles:!0,cancelable:!0},B=[],S=(e,t,r,i,n,o)=>{let a={a:i,b:r,c:t,d:e,e(e){i?A(r,e,o):r(e)}};B.push(a),e.addEventListener(t,a.e,n)},P=(e,t,r,i,n)=>{for(let o,a=B.length;a--;)if((o=B[a]).c==t&&o.a==i&&o.d==e&&o.b===r){B.splice(a,1),e.removeEventListener(t,o.e,n);break}},R=decodeURIComponent,H=new N,W=e=>{let t,r,i,n,o,a=H.get(e);if(!a){if(n={},-1==(o=e.indexOf("?")))t=e;else if(t=e.substring(0,o),e=e.substring(o+1))for(o of e.split("&"))[r,i]=o.split("="),n[R(r)]=R(i||"");H.set(e,a={a:t,b:n})}return{path:a.a,params:V({},a.b)}},q=new N,D=(e,t,r)=>(q.has(e)?r=q.get(e):(r=A(Function(`return ${e}`)),e.indexOf(u)>-1?L(t,r):q.set(e,r)),r),F=0,z=[],G=()=>{let e,t=s();for(;;){if(!(e=z[F-1])){z.length=F=0;break}if(e.apply(z[F],z[F+1]),F+=3,s()-t>32&&z.length>F){n(G);break}}},J=(e,t,r)=>{z.push(e,r,t),F||(F=1,n(G))},K={},Q=(e,t)=>{if(e)if(v==e)Z||(Z=Je.extend()),J(t,[Z]);else{b(e)||(e=[e]);let r,i,n,o=[],a=[],l=y.paths;for(r of e)(i=r.indexOf("/"))>-1&&!r.startsWith(".")&&(n=r.slice(0,i),r=r.slice(i+1),r=l[n]+r),r.endsWith(".js")||(r+=".js"),K[r]||(K[r]=import(r)),o.push(K[r]);Promise.all(o).then(e=>{for(r of e)a.push(r.default);J(t,a)})}else J(t)};function X(){}let Y=(e,t,r,i,n)=>(X[d]=t[d],n=new X,V(n,r),V(e,i),n.constructor=e,e[d]=n,e),ee=e=>e;let te,re,ie={fire(e,t){let r,i,n=this,o=n[u+e],a=0;if(t||(t={}),t.type=e,o)for(r=o.length;a<r;a++)(i=o[a]).f?(i.x=1,A(i.f,t,n),i.x=""):i.x||(o.splice(a--,1),r--);return(o=n[`on${e}`])&&A(o,t,n),n},on(e,t){let r=u+e;return(this[r]||(this[r]=[])).push({f:t}),this},off(e,t){let r,i=u+e,n=this,o=n[i];if(t){if(o)for(r of o)if(r.f==t){r.f="";break}}else n[i]=null,n[`on${e}`]=null;return n}},ne={},oe=(e,t,r,i)=>{t.indexOf(u)>0&&(i=ne[e])&&L(i.a,r)},ae=(e,t)=>{C(ne,e)||(ne[e]=t,se.fire("add",{vframe:t}))},le=(e,t,r)=>{for(t=e.c;t.length;)(r=t.shift()).r||J(e.invoke,[r.n,r.a],e),delete t[r.k]},fe=e=>e.b||(e.b=m(re));function se(e,t){let r=this,i=fe(e);r.id=i,r.root=e,r.d=1,r.b={},r.pId=t,r.c=[],r.a={},ae(i,r)}V(se,{root:()=>te,all:()=>ne,byId:e=>ne[e],byNode:e=>ne[e.b]},ie),V(se[d],{mountView(e,t){let r,i,n,o,a,l=this,{id:f,root:s,pId:u}=l;!l.e&&s&&(l.e=1,l.f=s.innerHTML),l.unmountView(),s&&e&&(r=W(e),n=r.path,l.path=e,o=r.params,oe(u,e,o),l.g=n,V(o,t),i=l.d,Q(n,e=>{if(i==l.d){if(!e)return y.error(Error(`${f} cannot load:${n}`));a=Ge(e),n=new e(f,s,l,o,a),l.h=n,qe(n),A(n.init,o,n),J(()=>{n.f(),n.tmpl||(l.e=0,n.g||n.endUpdate())})}}))},unmountView(){let e=this,{h:t,root:r}=e;e.c=[],t&&(e.unmountZone(),e.h=0,t.c&&($(t),t.c=0,t.fire("destroy"),qe(t,1),t.owner=t.root=null),r&&e.e&&w(r,e.f)),e.d++},mountVframe(e,t,r){let i,n=this,o=n.id,a=n.b,l=fe(e);return(i=ne[l])||(C(a,l)||(n.i=0),a[l]=l,i=new se(e,o)),i.mountView(t,r),i},mountZone(e){let t,r=this,i=(e=e||r.root).querySelectorAll("[mx-view]");for(t of i)t.a||(t.a=1,r.mountVframe(t,T(t,"mx-view")))},unmountVframe(e,t){let r,i;var n,o;e=e?this.b[t?e:e.b]:this.id,(r=ne[e])&&(r.unmountView(),i=r.pId,(o=ne[n=e])&&(delete ne[n],o.root.a=0,se.fire("remove",{vframe:o}),o.id=o.root=o.pId=o.b=null),(r=ne[i])&&C(r.b,e)&&(delete r.b[e],r.i=0))},unmountZone(e){let t,r,i,n=this;for(t in n.b)(i=e?(r=ne[t])&&k(r.root,e):1)&&n.unmountVframe(t,1)},children(e){return(e=this).i||(e.i=j(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=ne[t.pId];return t},invoke(e,t){let r,i,n,o,a,l=this.c;return(i=this.h)&&i.g?r=(n=i[e])&&A(n,t,i):((o=l[a=u+e])&&(o.r=t===o.a),o={n:e,a:t,k:a},l.push(o),l[a]=o),r}});let ue=new N(30,10),de=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,he={},ce={},pe={};let be=(e,r)=>{let i,n,o,a,f,s,u,d,h=[],c=e,p=T(e,`mx-${r}`),b=0;if(p&&((f=ue.get(p))||(f={v:(f=p.match(de)||t)[1],n:f[2],i:f[3]},ue.set(p,f)),f=V({},f,{r:p})),f&&!f.v||ce[r]){if(!(d=c.c)){for(u=[c];c!=l&&(c=c.parentNode);){if(ne[n=c.b]||(n=c.c)){d=n;break}u.push(c)}if(d)for(p of u)p.c=d}if(d){c=e.b,ne[c]&&(b=d=c);do{if((i=ne[d])&&(s=i.h)){if(a=(o=s.h)[r])for(c=a.length;c--;)o={r:n=a[c],v:d,n:n},n?!b&&e.matches(n)&&h.push(o):b&&h.unshift(o);if(s.tmpl&&!b)break;b=0}}while(i&&(d=i.pId))}}return f&&h.push(f),h},me=e=>{let t,r,i,n,o,a,l,f,{target:s,type:d}=e,h=[];for(;s&&1==s.nodeType&&!(e.cancelBubble||(r=s.d)&&r[d]);){if(h.push(s),(t=be(s,d)).length){h=[];for(let{v:r,r:h,n:c,i:p}of t){if(l!=r){if(l&&e.cancelBubble)break;l=r}if(!(n=(i=ne[r])&&i.h))break;n.g&&(a=n[o=c+u+d])&&(e.eventTarget=s,f=p?D(p,i.a):pe,e.params=f,A(a,e,n))}}s=s.parentNode}for(l of h)(r=l.d||(l.d={}))[d]=1},ge=(e,t,r)=>{let i=0|he[e],n=r?-1:1;i&&r!==i||(r?P:S)(l,e,me),he[e]=i+n,t&&(ce[e]=(0|ce[e])+n)};let we={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},ve=/[&<>"'\`]/g,ye=e=>null==e?"":""+e,xe=e=>we[e],ke=e=>ye(e).replace(ve,xe),$e={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Ve=e=>$e[e],je=/[!')(*]/g,Ie=e=>o(ye(e)).replace(je,Ve),Ee=/[\\'"]/g,Oe=e=>ye(e).replace(Ee,"\\$&"),Te=(e,t,r)=>(e[r]=t,r),Ue=(e,t)=>{if(e.c&&(t=e.tmpl)){let r,i=e.i,n=e.id,o=ne[n],a={a:[]},l=e.d,f=o.a;for(r of(e.j=0,e.i={},e.fire("dompatch"),r=t(l,Ae,n,ye,Ie,f,Te,Oe,b),Se(e.root,e.k,r,a,o,i),e.k=r,t=a.b||!e.g,a.a))J(We,[r]);t&&e.endUpdate(),e.fire("domready")}},Ae=(e,t,r,i)=>{let n;if(e){t=t||{};let o,a,l,f,s,u,d="",h={},c="<"+e,p="",b=[];if(r)for(f of r)l=f.a,f.b==Me&&(l=l?ke(l):" "),p+=l,u&&f.b==Me&&u.b==Me?u.a+=f.a:(f.d&&(h[f.d]=(h[f.d]||0)+1),f.e&&(o=1),u=f,b.push(f));for(a in t)!1!==(l=t[a])&&null!=l?(!0===l&&(t[a]=l=""),"id"==a?d=l:"mx-view"==a&&l&&!d?d=W(l).path:"_"!=a||d?"$"==a&&(o=1):d=l,"value"==a&&"textarea"==e?p=l:C(Le,a)||(c+=` ${a}="${l&&ke(l)}"`)):delete t[a];s=c,n={a:c+=i?"/>":`>${p}</${e}>`,c:p,d:d,b:e,e:o||C(Ce,e),f:s,g:t,h:b,i:h,j:i}}else n={b:t?u:Me,a:r+""};return n},Ce={input:{value:1,checked:1},textarea:{value:1},option:{selected:1}},Le={_:1,$:1};let Me=e;let Ne="http://www.w3.org/",Ze={svg:`${Ne}2000/svg`,math:`${Ne}1998/Math/MathML`},_e=(e,t,r,i)=>{let n,o,a=0,l=Ce[t.b],f=r.g,s=t.g;if(i){if(t)for(n in s)C(l,n)||C(f,n)||(a=1,e.removeAttribute(n));for(n in f)C(l,n)||C(Le,n)||(o=f[n],t&&s[n]===o||(a=1,e.setAttribute(n,o)))}for(n in l)o=C(f,n)?"value"!=n||f[n]:"value"==n&&"",e[n]!=o&&(a=1,e[n]=o);return a&&delete e.d,a},Be=(e,t)=>{let r,n=e.b;return n==Me?r=i.createTextNode(e.a):(r=i.createElementNS(Ze[n]||t.namespaceURI,n),_e(r,0,e,1),w(r,e.c)),r},Se=(e,t,r,i,n,o)=>{if(t){if(t.e||t.c!=r.c){let a,l,f,s,d,h,c=t.h,p=r.h,b=c.length,m=p.length,g=r.i,v=e.childNodes,y={},x=0;for(a=b;a--;)(d=(f=c[a]).d)&&(d=y[d]||(y[d]=[])).push(v[a]);for(a=0;a<m;a++)if(s=p[a],f=c[x++],(d=y[s.d])&&(d=d.pop())){if(d!=v[a]){for(l=x,h=1;l<b;l++,h++)if((f=c[l])&&v[a+h]==d){c.splice(l,1),x--;break}e.insertBefore(d,v[a])}g[f.d]&&g[f.d]--,Pe(d,e,f,s,i,n,o)}else f?y[f.d]&&g[f.d]?(b++,i.b=1,e.insertBefore(Be(s,e),v[a]),x--):Pe(v[a],e,f,s,i,n,o):(s.b==u?w(e,s.a):e.appendChild(Be(s,e)),i.b=1);for(a=m;a<b;a++)1==(l=v[m]).nodeType&&n.unmountZone(l),e.removeChild(l)}}else i.b=1,w(e,r.c)},Pe=(e,t,r,i,n,o,a)=>{let l=r.g,f=i.g,s=r.b;if(r.e||r.a!=i.a)if(s==u)n.b=1,w(t,i.a);else if(s==i.b){if(s==Me)n.b=1,e.nodeValue=i.a;else if(!l._||l._!=f._){let t,u,d,h,c,p,b,m=f["mx-view"],g=i.c,w=r.f!=i.f,v=C(Ce,s)||w,y=ne[e.b],x=m&&W(m);if(v&&(v=_e(e,r,i,w))&&(n.b=1),m&&y&&y.g==x.path&&(h=y.h)){if(p=g!=r.c,b=m!=y.path,d=l.$,!p&&!b&&d)for(d of c=d.split(","))if("#"==d||C(a,d)){b=1;break}(b||p)&&((d=h.g&&h.l)?(c=x.params,oe(y.pId,m,c),y.path=m,A(d,c,h)&&(h.m++,n.a.push(h)),t=!h.tmpl):(u=1,t=1))}else t=1,u=y;u&&(n.b=1,y.unmountVframe()),t&&!i.j&&Se(e,r,i,n,o,a)}}else n.b=1,o.unmountZone(e),t.replaceChild(Be(i,t),e)},Re=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,He=(e,t,r)=>(e.a?r=e:((r=function(e){A(r.a,e,this)}).a=[e],r.b=1),r.a=r.a.concat(t.a||t),r),We=e=>{e.m&&e.m--,e.c&&!e.m&&A(e.f,t,e)},qe=(e,t)=>{let r,{n:i,h:n,o:o,id:a}=e;for(r in i)ge(r,n[r],t);for(r of(i=t?P:S,o))i(r.a,r.b,r.c,a,r.d,e)},De={win:r,doc:i,body:l},Fe=(e,t,r)=>{let i,n,o,a,l={};for(n of e)for(i in n)o=n[i],a=l[i],"ctor"!=i?(Re.test(i)&&(a?o=He(a,o):o.b=1),l[i]=o):r.push(o);for(i in l)C(t,i)||(t[i]=l[i])};function ze(...e){let t=this.a||(this.a=[]);return Fe(e,this[d],t),this}let Ge=e=>{if(!e[u]){e[u]=[];let t,r,i,n,o,a,l,f,s,h,c,p=e[d],b={},m=[],g={};for(l in(r=p.mixins)&&Fe(r,p,e[u]),p)if(t=p[l],r=l.match(Re)){if([,a,i,n,c]=r,h={},c)for(f of c=c.split(","))h[f]=!0;for(f of n=n.split(",")){if(o=De[i],s=1,a){if(o){m.push({c:t,a:o,b:f,d:h});continue}s=2,(o=g[f])||(o=g[f]=[]),o[i]||(o[i]=1,o.push(i))}b[f]=b[f]|s,(o=p[f=i+u+f])?o.b&&(t.b?p[f]=He(t,o):C(p,l)&&(p[f]=t)):p[f]=t}}p.f=p.render,p.n=b,p.o=m,p.h=g,p.l=p.assign}return e[u]};function Je(e,t,r,i,n){(n=this).root=t,n.owner=r,n.id=e,n[u]=e,n.c=1,n.j=1,n.d={id:e},n.i={},n.m=0,(e=Je.a)&&A(e,i,n)}V(Je,{merge:ze,extend:function e(t,r){let i=this,n=(t=t||{}).ctor,o=[];function a(e,t,r,n,l,f,s,u){i.call(u=this,e,t,r,n,l),(f=a.a)&&A(f,n,u),(s=o.concat(l)).length&&A(s,n,u)}return n&&o.push(n),a.merge=ze,a.extend=e,Y(a,i,t,r)}}),V(Je[d],ie,{init:a,render:a,endUpdate(e,t,r,i){(t=this).c&&(i=t.g,t.g=1,(r=t.owner).mountZone(e),i||n(le,0,r))},observeLocation(e,t){let r;(r=this.a).a=1,p(e)&&(t=e.path,e=e.params),r.b=t,e&&(r.c=(e+"").split(","))},get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let r,i,n,o=this,a=o.d,l=o.i,f=o.j;for(n in e)r=e[n],i=a[n],x(r)&&i==r||C(t,n)||(l[n]=1,f=1),a[n]=r;return o.j=f,o},digest(e,t){let r=this.set(e,t);r.j&&Ue(r)}});let Ke=0;export default{config:(e,t)=>(t=y,e&&(t=p(e)?V(t,e):t[e]),t),boot(e){Ke||(Ke=1,V(y,e),((e,t)=>(te||(e=re=y.rootId,(t=g(e))||(t=l),te=new se(t)),te))().mountView(y.defaultView))},unboot(){Ke&&te&&(te.unmountVframe(),te=null)},toMap:(e,t)=>{let r,i={};if(e)for(r of e)i[t&&r?r[t]:r]=t?r:1+(0|i[r]);return i},toTry:A,toUrl:(e,t,r)=>{let i,n,a,l=[];for(n in t)i=t[n]+"",(!r||i||C(r,n))&&(i=o(i),l.push(a=n+"="+i));return a&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+l.join("&")),e},parseUrl:W,guid:m,use:Q,dispatch:(e,t,r)=>{let i=new Event(t,_);V(i,r),e.dispatchEvent(i)},guard:ee,type:c,has:C,inside:k,applyStyle:U,Cache:N,View:Je,Vframe:se,Event:ie,mark:(e,t,r,i,n)=>(e[n=u+"a"]||(r=e[n=u+"b"]||(e[n]={}),C(r,t)||(r[t]=0),i=++r[t]),r=>(r=e[n],r&&i===r[t])),unmark:$,node:g,task:J};