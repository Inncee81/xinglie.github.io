import Magix from"../lib/magix.js";let Body=document.body,Exchange=Object.assign({},Magix.Event),RAF=requestAnimationFrame,Next=e=>RAF(()=>RAF(e)),StopAnim=e=>{clearTimeout(StopAnim["_P"+e]);let t=Magix.node("a_"+e);t&&t.parentNode.removeChild(t)};Exchange.on("_D",e=>{StopAnim(e.id)}),Exchange.on("_C",e=>{let t=Magix.node("a_"+e.id);t||(Body.insertAdjacentHTML("beforeend",`<div id="a_${e.id}" class="xl-y"></div>`),t=Magix.node("a_"+e.id));let i=Magix.node(e.id+"_d_t"),d=Magix.node(e.id+"_tb_i");if(i&&d){let n=i.getBoundingClientRect(),o=d.getBoundingClientRect(),a=t.style;a.left=n.left+"px",a.top=n.top+"px",a.width=n.width+"px",a.height=n.height+"px",Next(()=>{a.left=o.left+"px",a.top=o.top+"px",a.width=o.width+"px",a.height=o.height+"px",StopAnim["_P"+e.id]=setTimeout(()=>{StopAnim(e.id)},300)})}else StopAnim(e.id)});export default Exchange;