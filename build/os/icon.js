let t={class:"xl-d"},e={class:"xl-e"};import l from"../lib/magix.js";import p from"../plugins/app.js";import s from"./ctrl.js";let a=l.toMap(p,"appId");export default l.View.extend({tmpl:(l,p,s,a,i,r,o)=>{let h,n,_,c=[],{items:m}=l;for(let l=0,i=m,d=i.length;l<d;l++){let m=i[l];_=[p(0,1,a(m.app.icon))],n=[p("div",t,_)],_=[p(0,0,a(m.app.title))],n.push(p("div",e,_)),h=[p("div",{class:"xl-c",style:"left:"+a(m.left)+"px;top:"+a(m.top)+"px","mx-click":s+"\x1e_ac({app:'"+o(r,m.app,"\x1e_."+l+".a")+"'})"},n)],c.push(...h)}return p(s,0,c)},init(){let t=getComputedStyle(document.body),e=parseInt(t.getPropertyValue("--xl-a"),10),p=parseInt(t.getPropertyValue("--xl-b"),10),i=parseInt(t.getPropertyValue("--xl-c"),10),r=parseInt(t.getPropertyValue("--xl-_"));this._Y=e,this._Z=p,this._a_=i,this._aa=r;let{params:o}=l.parseUrl(location.href);if(o.open){let t=o.open.split(",");for(let e of t){let t=a[e];t&&s._y(this,t)}}},_ab(){let t=this._Y,e=this._Z,l=this._a_,s=this._aa,a=document.body.clientHeight-s,i=l,r=l,o=[];for(let s of p){o.push({app:s,left:i,top:r});let p=r+e+l;p+e>=a&&(p=l,i+=t+l),r=p}this.set({items:o})},render(){this._ab(),this.digest()},"_ac<click>"(t){let{app:e}=t.params;s._y(this,e)},"$win<resize>"(){this.render()}});