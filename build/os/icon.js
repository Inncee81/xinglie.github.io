let $quick_c_0_static_attr={class:"xl-c"},$quick_c_1_static_attr={class:"xl-d"};import Magix from"../lib/magix.js";import Apps from"../plugins/app.js";import DialogCtrl from"./ctrl.js";let Position=0;export default Magix.View.extend({tmpl:(t,i,e,s,l,p,o)=>{let a,r,_,c=[],{items:n}=t;for(let t=0,l=n,h=l.length;t<h;t++){let n=l[t];_=[i(0,1,s(n.app.icon))],r=[i("div",$quick_c_0_static_attr,_)],_=[i(0,0,s(n.app.title))],r.push(i("div",$quick_c_1_static_attr,_)),a=[i("div",{class:"xl-b",style:"left:"+s(n.left)+"px;top:"+s(n.top)+"px","mx-click":e+"\x1e_W({app:'"+o(p,n.app,"\x1e_."+t+".a")+"'})"},r)],c.push(...a)}return i(e,0,c)},init(){let t=getComputedStyle(document.body),i=parseInt(t.getPropertyValue("--xl-a"),10),e=parseInt(t.getPropertyValue("--xl-b"),10),s=parseInt(t.getPropertyValue("--xl-c"),10),l=parseInt(t.getPropertyValue("--xl-_"));this._R=i,this._S=e,this._T=s,this._U=l},_V(){let t=this._R,i=this._S,e=this._T,s=this._U,l=document.body.clientHeight-s,p=e,o=e,a=[];for(let s of Apps){a.push({app:s,left:p,top:o});let r=o+i+e;r+i>=l&&(r=e,p+=t+e),o=r}this.set({items:a})},render(){this._V(),this.digest()},"_W<click>"(t){let{app:i}=t.params,e=Object.assign({},i),s=e.dockX,l=e.dockY;s||l||(s=30*Position+150,l=30*Position+30,++Position>5&&(Position=0)),e.left=s,e.top=l,DialogCtrl._s(this,e)},"$win<resize>"(){this.render()}});