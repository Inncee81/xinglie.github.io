let t={class:"xl-d"},e={class:"xl-e"};import l from"../lib/magix.js";import p from"../plugins/app.js";import s from"./ctrl.js";let i=l.toMap(p,"appId");export default l.View.extend({tmpl:(l,p,s,i,r,a,o)=>{let h,n,m,_=[],{items:c}=l;for(let l=0,r=c,d=r.length;l<d;l++){let c=r[l];m=[p(0,1,i(c.app.icon))],n=[p("div",t,m)],m=[p(0,0,i(c.app.title))],n.push(p("div",e,m)),h=[p("div",{class:"xl-c",style:"left:"+i(c.left)+"px;top:"+i(c.top)+"px","mx-click":s+"\x1e_X({app:'"+o(a,c.app,"\x1e_."+l+".a")+"'})"},n)],_.push(...h)}return p(s,0,_)},init(){let t=getComputedStyle(document.body),e=parseInt(t.getPropertyValue("--xl-a"),10),p=parseInt(t.getPropertyValue("--xl-b"),10),r=parseInt(t.getPropertyValue("--xl-c"),10),a=parseInt(t.getPropertyValue("--xl-_"));this._S=e,this._T=p,this._U=r,this._V=a;let{params:o}=l.parseUrl(location.href);if(o.open){let t=o.open.split(",");for(let e of t){let t=i[e];t&&s._s(this,t)}}},_W(){let t=this._S,e=this._T,l=this._U,s=this._V,i=document.body.clientHeight-s,r=l,a=l,o=[];for(let s of p){o.push({app:s,left:r,top:a});let p=a+e+l;p+e>=i&&(p=l,r+=t+l),a=p}this.set({items:o})},render(){this._W(),this.digest()},"_X<click>"(t){let{app:e}=t.params;s._s(this,e)},"$win<resize>"(){this.render()}});