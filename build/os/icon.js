/*!1.0.5 kooboy_li@163.com*/
let t={class:"xl-e"},e={class:"xl-f"};import l from"../lib/magix.js";import p from"../plugins/app.js";import a from"./ctrl.js";let i=l.toMap(p,"appId");export default l.View.extend({tmpl:(l,p,a,i,s,r,o)=>{let h,n,d,c=[],{items:f}=l;for(let l=f.length,s=0;s<l;s++){let l=f[s];d=[p(0,1,i(l.app.icon))],n=[p("div",t,d)],d=[p(0,0,i(l.app.title))],n.push(p("div",e,d)),h=[p("div",{class:"xl-d",style:"left:"+i(l.left)+"px;top:"+i(l.top)+"px","mx-click":a+"\x1e_ah({app:'"+o(r,l.app,"\x1eb."+s+".c")+"'})"},n)],c.push(...h)}return p(a,0,c)},init(){let t=getComputedStyle(document.body),e=parseInt(t.getPropertyValue("--xl-a"),10),p=parseInt(t.getPropertyValue("--xl-b"),10),s=parseInt(t.getPropertyValue("--xl-c"),10),r=parseInt(t.getPropertyValue("--xl-_"));this._ac=e,this._ad=p,this._ae=s,this._af=r;let{params:o}=l.parseUrl(location.href);if(o.open){let t=o.open.split(",");for(let e of t){let t=i[e];t&&a._C(this,t)}}},_ag(){let t=this._ac,e=this._ad,l=this._ae,a=this._af,i=document.body.clientHeight-a,s=l,r=l,o=[];for(let a of p){o.push({app:a,left:s,top:r});let p=r+e+l;p+e>=i&&(p=l,s+=t+l),r=p}this.set({items:o})},render(){this._ag(),this.digest()},"_ah<click>"(t){let{app:e}=t.params;e.url?window.open(e.url):a._C(this,e)},"$win<resize>"(){this.render()}});