/*!1.1.0 kooboy_li@163.com*/
import"./device.js";let t,e,i={class:"xl-H"};import l from"../lib/magix.js";import c from"./exchange.js";import s from"./ctrl.js";let p=(t,e)=>{let i=!1;return t["\0"+e.appId]||(t["\0"+e.appId]=1,t.push(e),i=!0),i};export default l.View.extend({tmpl:(l,c,s,p,a,d,o,r)=>{let h,_,m,v,x=[],{list:n,active:f}=l;t?h=[t]:(_=[c("path",{fill:"#fff",d:"M846.483 734.991c41.052 0 74.33-33.281 74.33-74.33V214.684c0-41.052-33.277-74.333-74.33-74.333H177.517c-41.052 0-74.33 33.281-74.33 74.333v445.977c0 41.049 33.277 74.33 74.33 74.33h222.989v74.33H136.974c-18.66 0-33.786 15.126-33.786 33.786v6.757c0 18.66 15.126 33.786 33.786 33.786h750.052c18.66 0 33.786-15.126 33.786-33.786v-6.757c0-18.66-15.126-33.786-33.786-33.786H586.33v-74.33h260.153zm-594.636-74.33c-41.052 0-74.33-33.281-74.33-74.333V289.013c0-41.052 33.277-74.33 74.33-74.33h520.307c41.049 0 74.33 33.277 74.33 74.33v297.315c0 41.052-33.281 74.333-74.33 74.333H251.847zm520.306-322.092c0-27.368-25.882-49.555-57.81-49.555H309.66c-31.928 0-57.814 22.187-57.814 49.555V536.78c0 27.364 25.885 49.552 57.814 49.552h404.684c31.928 0 57.81-22.187 57.81-49.552V338.569z"},0,0,1)],h=[t=c("svg",{_:"_",class:"xl-F",viewBox:"0 0 1024 1024"},_)]),x.push(c("div",{class:"xl-D xl-E",title:"\u663e\u793a\u684c\u9762","mx5-click":s+"\x1e_a_()"},h));for(let t=n.length,e=0;e<t;e+=1){let t=n[e];v=[c(0,1,p(t.icon))],_=[c("span",i,v),c(0,0,p(t.title))],m="xl-G",t.appId==f&&(m+=" xl-I"),h=[c("div",{title:p(t.title),"mx5-click":s+"\x1e_9({id:'"+r(t.appId)+"'})",id:p(t.appId)+"_tb_i",class:m},_)],x.push(...h)}return e?x.push(e):x.push(e=c("div",{_:"a","mx5-view":"~xl/os/device",class:"xl-K"})),c(s,0,x)},init(){let t,e=[],i=(i,l)=>{clearTimeout(t),i&&this.set({active:l}),t=setTimeout(()=>{this.digest({list:e})},50)};c.on("_M",t=>{p(e,t)&&i()}),c.on("_N",t=>{for(let l=e.length;l--;)if(e[l].appId==t.id){e.splice(l,1),delete e["\0"+t.id],i();break}}),c.on("_Q",t=>{i(!0,t.id)}),c.on("_R",()=>{i(!0)}),this.set({list:e})},render(){let t=this.get("list"),e=s._y();for(let i of e)p(t,i);this.digest()},"_9<click>"(t){let{id:e}=t.params;s._z(e,!0)},"_a_<click>"(){s._J()}});