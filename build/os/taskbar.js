import"./device.js";let t,e,i={class:"xl-G"};import l from"../lib/magix.js";import c from"./exchange.js";import s from"./ctrl.js";let p=(t,e)=>{let i=!1;return t["\0"+e.appId]||(t["\0"+e.appId]=1,t.push(e),i=!0),i};export default l.View.extend({tmpl:(l,c,s,p,d,a,o,r)=>{let h,m,v,x,_=[],{list:n,active:f}=l;t?h=[t]:(m=[c("path",{fill:"#fff",d:"M846.483 734.991c41.052 0 74.33-33.281 74.33-74.33V214.684c0-41.052-33.277-74.333-74.33-74.333H177.517c-41.052 0-74.33 33.281-74.33 74.333v445.977c0 41.049 33.277 74.33 74.33 74.33h222.989v74.33H136.974c-18.66 0-33.786 15.126-33.786 33.786v6.757c0 18.66 15.126 33.786 33.786 33.786h750.052c18.66 0 33.786-15.126 33.786-33.786v-6.757c0-18.66-15.126-33.786-33.786-33.786H586.33v-74.33h260.153zm-594.636-74.33c-41.052 0-74.33-33.281-74.33-74.333V289.013c0-41.052 33.277-74.33 74.33-74.33h520.307c41.049 0 74.33 33.277 74.33 74.33v297.315c0 41.052-33.281 74.333-74.33 74.333H251.847zm520.306-322.092c0-27.368-25.882-49.555-57.81-49.555H309.66c-31.928 0-57.814 22.187-57.814 49.555V536.78c0 27.364 25.885 49.552 57.814 49.552h404.684c31.928 0 57.81-22.187 57.81-49.552V338.569z"},0,1)],h=[t=c("svg",{class:"xl-E",viewBox:"0 0 1024 1024"},m)]),_.push(c("div",{_:"_",class:"xl-C xl-D",title:"\u663e\u793a\u684c\u9762","mx-click":s+"\x1e_Z()"},h));for(let t=0,e=n,l=e.length;t<l;t++){let l=e[t];x=[c(0,1,p(l.icon))],m=[c("span",i,x),c(0,0,p(l.title))],v="xl-F",l.appId==f&&(v+=" xl-H"),h=[c("div",{title:p(l.title),"mx-click":s+"\x1e_Y({id:'"+r(l.appId)+"'})",id:p(l.appId)+"_tb_i",class:v},m)],_.push(...h)}return e?_.push(e):_.push(e=c("div",{_:"a","mx-view":"~xl/os/device",class:"xl-J"})),c(s,0,_)},init(){let t,e=[],i=(i,l)=>{clearTimeout(t),i&&this.set({active:l}),t=setTimeout(()=>{this.digest({list:e})},50)};c.on("_B",t=>{p(e,t)&&i()}),c.on("_C",t=>{for(let l=e.length;l--;)if(e[l].appId==t.id){e.splice(l,1),delete e["\0"+t.id],i();break}}),c.on("_F",t=>{i(!0,t.id)}),c.on("_G",()=>{i(!0)}),this.set({list:e})},render(){let t=this.get("list"),e=s._o();for(let i of e)p(t,i);this.digest()},"_Y<click>"(t){let{id:e}=t.params;s._p(e,!0)},"_Z<click>"(){s._z()}});