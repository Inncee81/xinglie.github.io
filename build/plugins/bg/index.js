/*!1.0.2 kooboy_li@163.com*/
let t={class:"xl-P xl-S"};import r from"../../lib/magix.js";import e from"../../os/wallpaper.js";import a from"../../lib/agent.js";import l from"../../lib/cron.js";r.applyStyle("xle",".xl-P{width:310px;border-radius:2px;background:rgba(0,0,0,.53);height:62px;padding:2px 0;overflow:auto;box-shadow:0 -1px 0 6px rgba(0,0,0,.53)}.xl-Q{width:100px;height:60px;background-size:cover;background-repeat:no-repeat;float:left;cursor:pointer;background-color:hsla(0,0%,100%,.2)}.xl-R{margin-right:5px}.xl-S{scrollbar-width:thin;-ms-overflow-style:none}.xl-S::-webkit-scrollbar{height:0;width:0}.xl-S:hover::-webkit-scrollbar{height:2px}.xl-S::-webkit-scrollbar-corner{height:0;width:0}.xl-S::-webkit-scrollbar-thumb{background:hsla(0,0%,100%,.47);border-radius:2px}.xl-S::-webkit-scrollbar-thumb:hover{background:#fff}");let o="http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid=9&count=40&from=360chrome&start=";export default r.View.extend({tmpl:(r,e,a,l,o,i,s,h)=>{let p,d,n,c,b,g=[],{list:x}=r;if(x&&x.length){n=[];for(let t=x.length,r=t-1,o=0;o<t;o++){let t=x[o],i=o===r,s=t.url.replace("bdr/__85","bdr/200_120_60");b="xl-Q",i||(b+=" xl-R"),c=[e("div",{style:"background-image:url("+l(s)+")","mx-click":a+"\x1e_aq({thumb:'"+h(s)+"',src:'"+h(t.url)+"'})",class:b})],n.push(...c)}d=[e("div",{style:"height:100%;width:"+l(105*x.length-5)+"px"},n)],p=[e("div",t,d)],g.push(...p)}return e(a,0,g)},assign:()=>!1,async render(){try{let{start:t,last:r,exist:e}=(()=>{let t=Math.floor(400*Math.random()),r=localStorage.getItem("ls#bg.random"),e=0,a=0;if(r){let l=JSON.parse(r);l._am>Date.now()?(t=l._an,a=1):e=l._an}return{exist:a,start:t,last:e}})();a.clear(o+r,36e5),e||localStorage.setItem("ls#bg.random",JSON.stringify({_am:18e5+Date.now(),_an:t}));let l=await a.request(o+t,36e5,!0),i=JSON.parse(l),s=[];i&&i.data&&(s=i.data),this.digest({list:s}),this._ao(s)}catch(t){this.digest()}},_ao(t){if(!this._ap){this._ap=1;let r=()=>{let r=Math.floor(Math.random()*t.length),a=t[r].url,l=a.replace("bdr/__85","bdr/200_120_60");e._al(l,a)};l._r(r,216e5,!0),this.on("destroy",()=>{l._s(r)})}},"_aq<click>"(t){let{thumb:r,src:a}=t.params;e._al(r,a)}});