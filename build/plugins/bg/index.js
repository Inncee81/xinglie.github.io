/*!1.1.0 kooboy_li@163.com*/
let t={class:"xl-R xl-U"};import r from"../../lib/magix.js";import e from"../../os/wallpaper.js";import a from"../../lib/agent.js";import l from"../../lib/cron.js";r.applyStyle("xl-e",".xl-R{width:310px;border-radius:2px;background:rgba(0,0,0,.53);height:62px;padding:2px 0;overflow:auto;box-shadow:0 -1px 0 6px rgba(0,0,0,.53);transition:all .5s;opacity:.1}.xl-R:hover{opacity:1}.xl-S{width:100px;height:60px;background-size:cover;background-repeat:no-repeat;float:left;cursor:pointer;background-color:hsla(0,0%,100%,.2)}.xl-T{margin-right:5px}.xl-U{scrollbar-width:thin;-ms-overflow-style:none}.xl-U::-webkit-scrollbar{height:0;width:0}.xl-U:hover::-webkit-scrollbar{height:2px}.xl-U::-webkit-scrollbar-corner{height:0;width:0}.xl-U::-webkit-scrollbar-thumb{background:hsla(0,0%,100%,.47);border-radius:2px}.xl-U::-webkit-scrollbar-thumb:hover{background:#fff}");let o="http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory&cid=9&count=40&from=360chrome&start=";export default r.View.extend({tmpl:(r,e,a,l,o,i,s,h)=>{let c,p,d,n,g,b=[],{list:x}=r;if(x&&x.length){d=[];for(let t=x.length,r=t-1,o=0;o<t;o+=1){let t=x[o],i=o===r,s=t.url.replace("bdr/__85","bdr/200_120_60");g="xl-S",i||(g+=" xl-T"),n=[e("div",{style:"background-image:url("+l(s)+")","mx5-click":a+"\x1e_ah({thumb:'"+h(s)+"',src:'"+h(t.url)+"'})",class:g})],d.push(...n)}p=[e("div",{style:"height:100%;width:"+l(105*x.length-5)+"px"},d)],c=[e("div",t,p)],b.push(...c)}return e(a,0,b)},assign:()=>!1,async render(){try{let{start:t,last:r,exist:e}=(()=>{let t=Math.floor(400*Math.random()),r=localStorage.getItem("ls#bg.random"),e=0,a=0;if(r){let l=JSON.parse(r);l._ad>Date.now()?(t=l._ae,a=1):e=l._ae}return{exist:a,start:t,last:e}})();a.clear(o+r,!0),e||localStorage.setItem("ls#bg.random",JSON.stringify({_ad:18e5+Date.now(),_ae:t}));let l=await a.request(o+t,36e5,!0),i=JSON.parse(l),s=[];i&&i.data&&(s=i.data),this.digest({list:s}),this._af(s)}catch(t){this.digest()}},_af(t){if(!this._ag){this._ag=1;let r=()=>{let r=Math.floor(Math.random()*t.length),a=t[r].url,l=a.replace("bdr/__85","bdr/200_120_60");e._ac(l,a)};l._s(r,144e5,!0),this.on("destroy",()=>{l._t(r)})}},"_ah<click>"(t){let{thumb:r,src:a}=t.params;e._ac(r,a)}});