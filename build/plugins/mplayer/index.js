import"./channels.js";import"./volume.js";import"./time.js";import"./lyric.js";let $quick_r_2_static_node,$quick_r_4_static_node,$quick_r_6_static_node,$quick_r_8_static_node,$quick_r_11_static_node,$quick_r_13_static_node,$quick_r_15_static_node,$quick_r_19_static_node,$quick_r_24_static_node,$quick_r_25_static_node,$quick_r_0_static_attr={class:"xl-aL"},$quick_r_1_static_attr={class:"xl-aO"},$quick_r_3_static_attr={class:"xl-bf"},$quick_r_5_static_attr={class:"xl-aP"},$quick_r_7_static_attr={d:"M660.82303021 334.43597634l-19.23286534 0c-9.07252288 0-16.40262489 7.33069874-16.40262492 16.40262489L625.18753995 483.43981253c-1.886827-1.52402153-3.91925349-3.04804311-6.2416857-4.42706176l-225.57487907-139.71410744c-25.54794755-15.82201685-46.45043401-4.20985589-46.45043401 25.91075299L346.92054117 658.79060368c0 30.04721239 20.68468385 41.29716463 45.94262574 25.03954257L619.52646231 537.43874787c2.03242652-1.30562221 3.91925349-2.75803742 5.66107763-4.20985587L625.18753995 672.6529938c0 9.07252288 7.33069874 16.40262489 16.40262492 16.40262488l19.23286534 0c9.07252288 0 16.40262489-7.33069874 16.40262492-16.40262488l0-321.81439258c0-9.07252288-7.33069874-16.40262489-16.40262492-16.40262488z",fill:"#ffffff"},$quick_r_23_static_attr={class:"xl-aQ"};import Magix from"../../lib/magix.js";import Player from"./player.js";Magix.applyStyle("xli",".xl-aB{position:relative;color:#fff;-webkit-transition:right .2s;transition:right .2s;height:256px;right:-100%}.xl-aC{position:absolute;background:rgba(60,64,73,.8);height:calc(100% - 8px);width:510px;-webkit-transition:all .3s;transition:all .3s;overflow:auto;right:100%;padding:4px}.xl-aD{right:0}.xl-aE{right:-108px}.xl-aF{width:98px;float:left;height:110px;text-align:center;cursor:pointer;border:1px solid transparent;border-radius:5px}.xl-aF:hover{opacity:.6;border-color:hsla(0,0%,100%,.2)}.xl-aG{border-color:#fff}.xl-aG:hover{opacity:1;border-color:#fff}.xl-aH{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;width:88px;height:80px}.xl-aI{width:auto;height:auto;max-width:100%;max-height:100%}.xl-aJ{width:56px;height:56px;border:1px solid #fff;margin:2px;float:left;background-size:cover;background-repeat:no-repeat}.xl-aK{width:8px;height:8px;background:#555;border-radius:50%;margin:50%;-webkit-transform:translate(-4px,-4px);transform:translate(-4px,-4px);box-shadow:0 0 0 3px hsla(0,0%,100%,.73)}.xl-aL{height:100%;background:#333;position:relative;z-index:2;overflow:hidden}.xl-aM,.xl-aN{margin:5px 10px 0;float:left;width:130px;overflow:hidden}.xl-aO{display:grid;grid-template-columns:58% 42%}.xl-aM{cursor:pointer}.xl-aM:hover{opacity:.6}.xl-aP{height:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding-left:15px}.xl-aQ{font-size:12px;margin-left:10px}@-webkit-keyframes xl-_{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes xl-_{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.xl-aJ{border-radius:50%;-webkit-animation:xl-_ 8s linear infinite;animation:xl-_ 8s linear infinite;border-width:3px;cursor:pointer}.xl-aR{padding:2px;border:1px solid transparent;cursor:pointer;border-radius:4px;width:24px;height:24px}.xl-aR:hover{opacity:.6;border-color:#fff}.xl-aS{-webkit-animation:xl-_ 1.8s linear infinite;animation:xl-_ 1.8s linear infinite}.xl-aS:hover{opacity:1;border-color:transparent}.xl-aT{cursor:not-allowed;opacity:.6}.xl-aT:hover{border-color:transparent}.xl-aU{height:20px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.xl-aV{width:310px}.xl-aW{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.xl-aX{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center}.xl-aY{font-size:12px}.xl-aZ{width:80px;margin:0 10px}.xl-b_{font-size:12px;margin:0 10px}.xl-ba{margin-top:10px;text-align:center}.xl-bb{font-size:12px;opacity:.6;line-height:20px;color:#afafaf;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:20px;overflow:hidden}.xl-bc{font-weight:700;font-size:14px;opacity:1;color:#fff}.xl-bd{margin-left:15px}@-webkit-keyframes xl-a{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-50%);transform:translate(-50%)}}@keyframes xl-a{0%{-webkit-transform:translate(0);transform:translate(0)}to{-webkit-transform:translate(-50%);transform:translate(-50%)}}.xl-be{-webkit-animation:xl-a 20s linear infinite;animation:xl-a 20s linear infinite;border-spacing:0;display:table}.xl-bf{white-space:nowrap;min-width:130px;display:table-cell}.xl-bg{-webkit-animation-play-state:paused;animation-play-state:paused}.xl-bh{-webkit-animation-name:none;animation-name:none;padding-left:0}");export default Magix.View.extend({tmpl:(t,i,a,e)=>{let s,r,l,c,n,_,o,d,x,p,f,h=[],{active:u,cshow:g,buffer:m,song:k,play:w,reset:b,undo:v,ptip:y,ntip:$,mode:q,error:z}=t;if(s="xl-aC",u&&!g&&(s+=" xl-aE"),r=[i("div",{"mx-view":"~xl/plugins/mplayer/channels","mx-change":a+"\x1e_aq()",class:s})],l=[],u){let t=m||!k.picture||!w;d=$quick_r_2_static_node?[$quick_r_2_static_node]:[$quick_r_2_static_node=i("div",{_:"_",class:"xl-aK"})],s="xl-aJ",t&&(s+=" xl-bg"),b&&(s+=" xl-bh"),_=[i("div",{"mx-click":!m&&k.picture&&a+"\x1e_aD()",style:null!=k.picture&&"background-image:url("+e(k.picture)+")",class:s},d)],d=[i(0,0,"\u5206\u7c7b\uff1a"+e(u.name))],_.push(i("div",{class:"xl-aM","mx-click":a+"\x1e_aE()"},d)),p=[i(0,0,e(k.title)+"<"+e(k.artist)+">\u2003\u2003\u2003\u2003")],x=[i("div",$quick_r_3_static_attr,p)],p=[i(0,0,e(k.title)+"<"+e(k.artist)+">\u2003\u2003\u2003\u2003")],x.push(i("div",$quick_r_3_static_attr,p)),s="xl-be",t&&(s+=" xl-bg"),b&&(s+=" xl-bh"),d=[i("div",{class:s},x)],_.push(i("div",{class:"xl-aN",title:e(k.title)+"<"+e(k.artist)+">"},d)),n=[i("div",0,_)],$quick_r_4_static_node?n.push($quick_r_4_static_node):n.push($quick_r_4_static_node=i("div",{_:"a","mx-view":"~xl/plugins/mplayer/volume",class:"xl-aX"})),c=[i("div",$quick_r_1_static_attr,n)],n=[],$quick_r_6_static_node?_=[$quick_r_6_static_node]:(d=[i("path",$quick_r_7_static_attr)],_=[$quick_r_6_static_node=i("svg",{_:"b",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},d)]),s="xl-aR xl-aW",v||(s+=" xl-aT"),n.push(i("span",{"mx-click":v&&a+"\x1e_aF()",title:e(y),class:s},_)),m?($quick_r_8_static_node?_=[$quick_r_8_static_node]:(x=[i("path",{d:"M415.744 806.4c11.264 11.264 16.896 25.088 16.896 41.984s-5.632 31.232-16.896 42.496c-11.264 11.264-25.088 16.896-41.472 16.896s-30.208-5.632-41.472-16.896c-11.264-11.264-16.896-25.6-16.896-42.496 0-16.896 5.632-30.72 16.896-41.984 11.264-11.264 25.088-16.896 41.472-17.92 16.384 0.512 30.208 6.656 41.472 17.92z m106.496 21.504c-14.848 0-27.136 5.12-36.864 15.36s-14.848 22.528-14.848 37.888c0 14.848 5.12 27.648 14.848 37.376s22.528 14.848 37.376 14.848 27.648-5.12 37.376-14.848c9.728-9.728 14.848-22.528 14.848-37.376s-5.12-27.648-14.848-37.888c-10.24-10.24-22.528-15.36-37.888-15.36z m-281.6-144.384c-18.944 0.512-34.816 7.168-47.616 19.456s-18.944 28.16-18.944 46.592 6.144 34.304 18.944 46.592c12.288 12.288 28.16 18.944 46.592 18.944s34.304-6.144 46.592-18.944c12.288-12.288 18.944-28.16 18.944-46.592s-6.144-34.304-18.944-46.592c-11.776-12.288-27.136-18.944-45.568-19.456z m32.256-421.376c24.064-0.512 44.544-9.216 60.928-25.6s24.576-36.352 24.576-61.44-8.192-45.056-24.576-61.44c-16.384-16.384-36.352-24.064-60.928-24.064s-44.544 8.192-60.928 24.576-24.576 36.352-24.576 61.44 8.192 45.056 24.576 61.44 36.864 24.576 60.928 25.088z m-124.928 195.072c22.528-0.512 40.96-8.192 55.808-23.552 14.848-14.848 22.528-33.792 22.528-55.808 0-22.528-7.168-40.96-22.528-55.808-14.848-14.848-33.792-22.528-56.32-22.528s-41.472 7.168-56.32 22.528c-14.848 15.36-22.528 33.792-22.528 56.32s7.168 40.96 22.528 55.808c14.848 14.848 33.792 22.528 56.832 23.04z m74.24 130.048c-0.512-20.992-7.68-38.4-21.504-52.224-13.824-13.824-30.72-20.48-51.712-20.48s-37.888 6.656-51.712 20.48c-13.824 13.824-20.992 30.72-20.992 51.712s6.656 37.888 20.48 51.712 30.72 20.48 51.712 20.48 37.888-6.656 51.712-20.48c14.336-13.824 21.504-31.232 22.016-51.2z m727.552-99.328c-3.584-3.584-8.192-5.632-13.824-5.632s-10.752 2.048-14.336 5.632-5.632 8.704-5.632 14.336 2.048 10.752 5.632 14.336 8.704 5.632 14.336 5.632 10.24-2.048 13.824-5.632c3.584-3.584 5.12-8.704 5.12-14.336s-2.048-10.752-5.12-14.336z m-34.304 91.648c-7.68 0-13.824 2.56-18.944 7.68s-7.68 11.264-7.68 18.944 2.56 13.824 7.68 18.944 11.264 7.68 18.944 7.68 13.824-2.56 18.944-7.68c4.608-5.12 7.168-11.264 7.168-18.944s-2.56-13.824-7.168-18.944c-5.12-5.12-11.264-7.68-18.944-7.68z m-134.656 175.616c-11.264 0.512-20.992 4.608-28.16 11.776-7.168 7.168-11.264 16.896-11.264 28.16s3.584 20.992 11.264 28.672c7.168 7.68 16.896 11.264 28.16 11.264s20.992-3.584 28.672-11.264c7.68-7.68 11.264-16.896 11.264-28.672s-3.584-20.992-11.264-28.16c-7.68-7.168-16.896-11.264-28.672-11.776z m-114.688 56.32c-12.8 0-23.552 4.608-32.256 13.312s-13.312 19.968-13.312 32.768c0 12.8 4.608 24.064 13.312 32.768 9.216 9.216 19.968 13.312 32.768 13.312 12.8 0 24.064-4.608 32.256-13.312s12.8-19.968 12.8-32.768c0-12.8-4.608-24.064-12.8-32.768-8.192-8.704-18.944-13.312-32.768-13.312z m198.144-137.728c-9.216 0.512-16.896 4.096-23.04 10.24-6.656 6.144-9.728 13.824-9.728 23.552s3.072 17.408 9.728 24.064c6.144 6.144 14.336 9.728 23.552 9.728 9.216 0 16.896-3.072 23.552-9.728 6.144-6.144 9.728-14.336 9.728-24.064s-3.072-17.408-9.728-23.552c-6.656-6.144-14.848-9.216-24.064-10.24z",fill:"#ffffff"})],d=[i("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},x)],_=[$quick_r_8_static_node=i("span",{_:"c",class:"xl-aR xl-aS"},d)]),n.push(..._)):(d=[],w?($quick_r_11_static_node?x=[$quick_r_11_static_node]:(p=[i("path",{d:"M735.744 49.664c-51.2 0-96.256 44.544-96.256 95.744v733.184c0 51.2 45.056 95.744 96.256 95.744s96.256-44.544 96.256-95.744V145.408c0-51.2-45.056-95.744-96.256-95.744z m-447.488 0c-51.2 0-96.256 44.544-96.256 95.744v733.184c0 51.2 45.056 95.744 96.256 95.744S384 929.792 384 878.592V145.408c0-51.2-44.544-95.744-95.744-95.744z",fill:"#ffffff"})],x=[$quick_r_11_static_node=i("svg",{_:"d",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},p)]),d.push(...x)):($quick_r_13_static_node?x=[$quick_r_13_static_node]:(p=[i("path",{d:"M346.0096 129.49504l461.824 351.41632a40.87808 40.87808 0 0 1 0 65.08544l-461.824 351.41632a40.87808 40.87808 0 0 1-65.65888-32.54272V162.03776a40.89856 40.89856 0 0 1 65.65888-32.54272z",fill:"#ffffff"})],x=[$quick_r_13_static_node=i("svg",{_:"e",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},p)]),d.push(...x)),f="\u70b9\u51fb",_=[i("span",{class:"xl-aR","mx-click":a+"\x1e_aD()",title:f+=w?"\u6682\u505c":"\u64ad\u653e"},d)],n.push(..._)),$quick_r_6_static_node?_=[$quick_r_6_static_node]:(d=[i("path",$quick_r_7_static_attr)],_=[$quick_r_6_static_node=i("svg",{_:"b",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},d)]),n.push(i("span",{class:"xl-aR","mx-click":a+"\x1e_as()",title:e($)},_)),_=[],"rdm"==q?($quick_r_15_static_node?d=[$quick_r_15_static_node]:(x=[i("path",{d:"M229.55469189 408.4572369h103.54276309c5.1913003 0 20.67163558 5.1913003 25.86293588 10.38196408l36.24489997 36.24489998c10.38196409 15.5732644 31.05359967 15.5732644 46.53393494 0 15.5732644-10.38196409 15.5732644-31.05359967 0-46.53393495l-36.24489996-36.24489997c-15.48033528-15.48033528-46.53393495-31.05359967-72.48916344-31.05359966H229.55532839c-20.67163558 0-31.05359967 15.5732644-31.05359968 31.05359966 0 20.57870648 15.5732644 36.15197085 31.05359968 36.15197086z",fill:"#ffffff"}),i("path",{d:"M617.77115232 408.4572369h56.91589903v41.43556376c0 10.38196409 5.1913003 15.5732644 15.57326438 10.3819641l119.02309838-77.58753462c10.38196409-5.1913003 10.38196409-15.5732644 1e-8-20.67163557L690.26031573 284.42805994c-10.38196409-5.1913003-15.5732644 0-15.57326439 10.3819641v56.82360643h-56.91589902c-51.72523524 0-62.10656284 25.86293587-98.35146281 62.10656284L400.39659113 584.3026687c-20.67163558 20.67163558-82.77819841 41.43556377-113.83243459 41.43556376H229.64825749c-20.67163558 0-31.05359967 15.48033528-31.05359967 31.05359968 0 20.67163558 15.48033528 31.05359967 31.05359968 31.05359967h56.91589905c51.72523524 0 124.21439867-25.86293587 160.45866213-62.10656284l119.02309838-170.74769713c25.86293587-25.86293587 20.67163558-46.53393495 51.72523525-46.53393494z",fill:"#ffffff"}),i("path",{d:"M809.28341411 646.50343365L690.26031573 563.72523524c-10.38196409-5.1913003-15.5732644 0-15.57326439 10.3819641v51.72523525h-56.91589902c-5.1913003 0-20.67163558-5.1913003-25.86293589-10.3819641l-36.24489996-36.24489997c-10.38196409-15.5732644-31.05359967-15.5732644-46.53393495 0-15.48033528 10.38196409-15.48033528 31.05359967 0 46.53393494l36.24489996 36.24489998c15.5732644 15.48033528 46.53393495 31.05359967 72.48916345 31.05359966h56.91589903v41.43556376c0 10.38196409 5.1913003 15.48033528 15.57326438 10.38196409L809.37570672 667.26799835c10.19674237-5.1913003 10.19674237-15.5732644-0.09292912-20.76392819z",fill:"#ffffff"})],d=[$quick_r_15_static_node=i("svg",{_:"f",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},x)]),_.push(...d)):($quick_r_19_static_node?d=[$quick_r_19_static_node]:(x=[i("path",{d:"M549.4353852 287.38769077l-128.34989117 0c-67.74022031 0-133.69780326 26.73956037-181.82901262 74.87076975-48.13120936 48.13120936-74.87076974 112.30615496-74.87076974 181.82901261 0 23.17428567 3.56527471 46.348572 8.9131868 69.52285767 3.56527471 12.47846152 16.04373623 21.3916483 28.52219774 21.3916483 1.78263736 0 5.34791208 0 7.13054942-1.78263735 16.04373623-3.56527471 24.95692302-19.60901093 19.60901096-35.65274785-5.34791208-17.82637358-7.13054944-35.65274785-7.13054943-53.47912144 0-110.5235176 89.13186861-199.6553862 199.65538619-199.65538621l117.65406703 0C540.52219773 324.82307531 544.08747246 305.21406436 549.4353852 287.38769077z",fill:"#ffffff"}),i("path",{d:"M807.91780424 610.04505539c-32.08747246 65.95758295-99.82769277 112.30615496-178.26373788 112.30615498L360.47582316 722.35121036l0-51.69648409c0-16.04373623-10.69582415-23.17428567-24.95692303-14.26109886l-123.0019791 76.6534071c-14.26109887 8.9131868-14.26109887 23.17428567 0 32.08747245l124.78461648 80.21868182c14.26109887 8.9131868 24.95692302 3.56527471 24.95692301-14.26109886l0-51.69648409 269.17824387 0c67.74022031 0 133.69780326-26.73956037 181.82901261-74.87076974 30.3048351-30.3048351 53.47912143-67.74022031 64.1749456-108.74088024C854.26637625 602.91450597 831.0920906 608.26241804 807.91780424 610.04505539z",fill:"#ffffff"}),i("path",{d:"M788.30879331 164.38571167c-108.74088022 0-196.09011148 87.34923125-196.09011149 196.09011149s87.34923125 196.09011148 196.09011148 196.09011149 196.09011148-87.34923125 196.09011149-196.09011149S897.04967353 164.38571167 788.30879331 164.38571167zM823.96154048 465.651428l-37.43538521 0 0-147.95890213c-14.26109887 12.47846152-30.3048351 21.3916483-51.69648409 28.52219773L734.82967186 306.99670171c10.69582415-1.78263736 21.3916483-7.13054944 32.08747247-14.26109885 10.69582415-7.13054944 21.3916483-14.26109887 28.52219772-23.17428568l28.52219774 0L823.96154048 465.651428z",fill:"#ffffff"})],d=[$quick_r_19_static_node=i("svg",{_:"g",viewBox:"0 0 1208 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},x)]),_.push(...d)),f="\u6b63\u5728",f+="rdm"==q?"\u968f\u673a\u64ad\u653e":"\u5355\u66f2\u5faa\u73af",n.push(i("span",{class:"xl-aR xl-bd","mx-click":a+"\x1e_aG()",title:f},_)),o="",z?o+=" "+e(z)+" ":w||m||(o+=" \u70b9\u51fb\u64ad\u653e\u6309\u94ae\u7ee7\u7eed "),_=[i(0,0,o)],n.push(i("span",$quick_r_23_static_attr,_)),c.push(i("div",$quick_r_5_static_attr,n)),$quick_r_24_static_node?c.push($quick_r_24_static_node):c.push($quick_r_24_static_node=i("div",{_:"h","mx-view":"~xl/plugins/mplayer/time",class:"xl-aU"})),$quick_r_25_static_node?c.push($quick_r_25_static_node):c.push($quick_r_25_static_node=i("div",{_:"i","mx-view":"~xl/plugins/mplayer/lyric",class:"xl-ba"})),l.push(...c)}return r.push(i("div",$quick_r_0_static_attr,l)),s="xl-aB",u&&(s+=" xl-aD"),h.push(i("div",{class:s},r)),i(a,0,h)},init(){Player.on("_ar",()=>{if("rdm"==this.get("mode")){let t=this.get("active");Player._as(t.channel_id)}else Player._at()}),Player.on("_au",t=>{let i={};Magix.has(t,"play")&&(i.play=t.play),Magix.has(t,"buffer")&&(i.buffer=t.buffer),this.digest(i)}),Player.on("_av",()=>{this.set({reset:!1}),this.render()}),Player.on("_aw",t=>{this.digest({reset:!0,song:t.song})}),this.set({cshow:!1,reset:!0,mode:"rdm",song:{title:"\u8f6f\u4ef6\u4f5c\u8005",artist:"\u884c\u5217"}})},render(){this.digest({ptip:Player._ax(),ntip:Player._ay(),undo:Player._az()})},_aC(){this.get("play")?Player._aA():Player._aB()},"_aq<change>"(t){this.digest({active:t.channel}),Player._as(t.channel.channel_id,!0)},"_aD<click>"(){this._aC()},"_aE<click>"(){this.digest({cshow:!this.get("cshow")})},"_as<click>"(){let t=this.get("active");Player._as(t.channel_id)},"_aF<click>"(){Player._aF()},"_aG<click>"(){"rdm"==this.get("mode")?this.digest({mode:"circle"}):this.digest({mode:"rdm"})},"$doc<keyup>"(t){if(Player._aH()){let i=t.keyCode;if(13==i||32==i)this._aC();else if(80==i)Player._aF();else if(78==i){let t=this.get("active");Player._as(t.channel_id)}else 67==i&&this.digest({cshow:!this.get("cshow")})}},"$doc<visibilitychange>"(){Player._aI(document.hidden)},"$doc<click>"(t){Player._aH()&&this.get("cshow")&&(Magix.inside(t.target,this.root)||this.digest({cshow:!1}))}});