let t,i,e={class:"xl-bh"},l={class:"xl-bt"},s={class:"xl-bl"},a={class:"xl-bn"},r={class:"xl-bm"},o={class:"xl-bp"},d={class:"xl-bq"};var n=this&&this.__awaiter||function(t,i,e,l){return new(e||(e=Promise))(function(s,a){function r(t){try{d(l.next(t))}catch(t){a(t)}}function o(t){try{d(l.throw(t))}catch(t){a(t)}}function d(t){t.done?s(t.value):new e(function(i){i(t.value)}).then(r,o)}d((l=l.apply(t,i||[])).next())})};import c from"../../lib/magix.js";import h from"../../os/ctrl.js";import p from"./bridge.js";c.applyStyle("xlj",'.xl-bh{height:28px;line-height:28px;padding:0 26px;background:#ddd;color:#333;position:-webkit-sticky;position:sticky;top:0}.xl-bi{float:left;padding:0 5px;cursor:pointer}.xl-bj{background:#fff}.xl-bk{display:inline-grid;grid-template-columns:70% 30%;grid-template-rows:80% 20%;grid-template-areas:"a b" "c c";width:410px;height:120px;margin:10px;padding:5px;background:#fafafa;border-radius:4px;transition:box-shadow .25s;cursor:pointer}.xl-bk:hover{box-shadow:0 3px 6px 0 rgba(0,0,0,.08)}.xl-bl{font-size:18px;padding:5px}.xl-bm{grid-area:c;color:#aaa}.xl-bn{width:120px;height:80px;align-items:center}.xl-bo{width:auto;height:auto;max-width:100%;max-height:100%}.xl-bp,.xl-bq{display:inline-block;height:22px;line-height:22px}.xl-bq{float:right}.xl-br{color:red}.xl-bs{color:#ff8703}.xl-bt{display:table}.xl-bu{font-size:20px;text-align:center;height:40px;line-height:40px}');let x=[{text:"\u5168\u90e8",id:"BBM54PGA"},{text:"\u5a31\u4e50",id:"BA10TA81"},{text:"\u4f53\u80b2",id:"BA8E6OEO"},{text:"\u8d22\u7ecf",id:"BA8EE5GM"},{text:"\u519b\u4e8b",id:"BAI67OGG"},{text:"\u79d1\u6280",id:"BA8D4A3R"},{text:"\u624b\u673a",id:"BAI6I0O5"},{text:"\u6570\u7801",id:"BAI6JOD9"},{text:"\u65f6\u5c1a",id:"BA8F6ICN"},{text:"\u6e38\u620f",id:"BAI6RHDK"},{text:"\u6559\u80b2",id:"BA8FF5PR"},{text:"\u5065\u5eb7",id:"BDC4QSV3"},{text:"\u65c5\u6e38",id:"BEO4GINL"}],g={};window.artiList=(t=>{let i=document.currentScript.src,e=g[i];e&&(e(t),delete g[i])});let b={icon:'<svg viewBox="0 0 1039 1024"><path d="M906.589 0H132.688A132.79 132.79 0 0 0 0 132.688v605.318a132.79 132.79 0 0 0 132.688 132.79h220.411l70.828 102.882a116.181 116.181 0 0 0 191.422 0l70.828-102.922H906.59a132.79 132.79 0 0 0 132.79-132.79V132.688A132.79 132.79 0 0 0 906.589 0zm48.458 738.006a48.52 48.52 0 0 1-48.458 48.459H641.866l-95.894 139.409a31.951 31.951 0 0 1-52.667 0l-95.895-139.41H132.688a48.52 48.52 0 0 1-48.458-48.458V132.688a48.52 48.52 0 0 1 48.458-48.458h773.9a48.52 48.52 0 0 1 48.459 48.458z" fill="#1ACAD8"/><path d="M288.665 368.176a63.33 63.33 0 1 0 63.33 63.33 63.33 63.33 0 0 0-63.33-63.33zm230.973 0a63.33 63.33 0 1 0 63.33 63.33 63.33 63.33 0 0 0-63.33-63.33zm230.973 0a63.33 63.33 0 1 0 63.331 63.33 63.33 63.33 0 0 0-63.33-63.33z" fill="#1ACAD8"/></svg>',appId:"aaa",title:"\u65b0\u95fb\u8be6\u60c5",width:500,height:650,min:!0,close:!0,dockY:30,view:"~xl/plugins/news/detail"},m=(t,i,e)=>{p._bB(i,e),h._s(t,b)};export default c.View.extend({tmpl:(n,c,h,p,x,g,b,m)=>{let u,f,v,w,_,A,k,B,y=[],{cats:z,active:C,loading:I,error:G,list:H}=n;u=[];for(let t=0,i=z,e=i.length;t<e;t++){let e=i[t];w=[c(0,0,p(e.text))],v="xl-bi",e.id==C&&(v+=" xl-bj"),f=[c("div",{"mx-click":e.id!=C&&h+"\x1e_bH({id:'"+m(e.id)+"'})",class:v},w)],u.push(...f)}if(y.push(c("div",e,u)),I)t?u=[t]:(f=[c(0,0,"loading...")],u=[t=c("div",{_:"_",class:"xl-v"},f)]),y.push(...u);else if(G)u=[c(0,0,p(G))],y.push(...u);else{f=[];for(let t=0,i=H,e=i.length;t<e;t++){let e=i[t];A=[c(0,0,p(e.title))],_=[c("div",s,A)],A=[c("img",{loading:"lazy",class:"xl-bo",src:p(e.imgsrc)},0,1)],_.push(c("div",a,A)),k=[c(0,0,"\u6765\u6e90\uff1a"+p(e.source))],A=[c("span",o,k)],k=[c(0,0,p(e.ptime)+"\u2003")],B=[c(0,0,"\u8bc4\u8bba\uff1a"+p(e.commentCount))],v="",e.commentCount>1e3?v+="xl-br":v+="xl-bs",k.push(c("span",{"mx-click":h+"\x1e_bJ({detail:'"+b(g,e,"\x1eg."+t)+"'})",class:e.commentCount>=500&&v},B)),A.push(c("span",d,k)),_.push(c("div",r,A)),w=[c("div",{class:"xl-bk","mx-click":h+"\x1e_bI({detail:'"+b(g,e,"\x1eg."+t)+"'})"},_)],f.push(...w)}u=[c("div",l,f)],i?u.push(i):(f=[c(0,0,"\u66f4\u591a\u52a0\u8f7d\u4e2d...")],u.push(i=c("div",{_:"a",class:"xl-bu"},f))),y.push(...u)}return c(h,0,y)},init(){this.set({active:x[0].id,cats:x,list:[],start:0,size:20,loading:!0})},_bG(){return n(this,void 0,void 0,function*(){try{let t=this.get("active"),i=this.get("start"),e=this.get("size"),l=c.mark(this,"_bE"),s=yield((t,i,e)=>new Promise((l,s)=>{let a=document.createElement("script"),r=!1,o=()=>{a.parentNode.removeChild(a)},d="https://3g.163.com/touch/reconstruct/article/list/{id}wangning/{start}-{end}.html?_={guid}".replace("{id}",t).replace("{start}",i.toString()).replace("{end}",e.toString()).replace("{guid}",c.guid("thx_"));g[d]=(i=>{if(!r){let e=i[t+"wangning"];r=!0,l(e)}}),a.onload=(()=>{setTimeout(()=>{o(),r||s(`load ${d} error`)},50)}),a.onerror=(()=>{o(),s(`load ${d} error`)}),a.src=d,document.body.append(a)}))(t,i,e);if(l()){let t=this.get("list");t.push(...s),this.digest({loading:!1,list:t})}}catch(t){this.digest({error:t})}delete this._bF})},render(){this._bG()},"_bH<click>"(t){let{id:i}=t.params;this.root.scrollTop=0,this.digest({list:[],loading:!0,active:i,start:0}),this._bG()},"_bI<click>"(t){if(!t.fromComment){let{detail:i}=t.params;m(this,i)}},"_bJ<click>"(t){t.fromComment=!0;let{detail:i}=t.params;m(this,i,!0)},"$win<scroll>&capture"(t){if(t.target==this.root&&!this._bF){let t=this.root;if(t.scrollTop+t.offsetHeight+200>t.scrollHeight){this._bF=1;let t=this.get("start")+this.get("size");this.set({start:t}),this._bG()}}}});