/*!1.0.5 kooboy_li@163.com*/
let t={class:"xl-ca"};import l from"../../lib/magix.js";import e from"../../lib/agent.js";import i from"../../os/ctrl.js";l.applyStyle("xl-p",".xl-ca{height:28px;line-height:28px;padding:0 26px;background:#ddd;color:#333;position:-webkit-sticky;position:sticky;top:0}.xl-cb{float:left;padding:0 5px;cursor:pointer}.xl-cc{background:#fff}.xl-cd{margin:8px;border-radius:4px;background:#fafafa;padding:3px 10px;cursor:pointer;float:left}.xl-cd:hover{background:#e6e6e6}.xl-ce{padding:10px;overflow:scroll;box-sizing:border-box;height:100%}.xl-cf{font-weight:700;font-size:16px;padding:3px 10px;background:#f5f5f5}.xl-cg{padding:3px 30px;height:30px;line-height:30px;cursor:pointer}.xl-cg:hover{background:#fafafa}.xl-ch{-webkit-filter:blur(10px);filter:blur(10px)}.xl-ci{position:absolute;left:0;right:0;bottom:0;top:100%;background:rgba(0,0,0,.73);color:#fff;padding:10px;word-break:break-all;-webkit-transition:all .25s;transition:all .25s}.xl-cj{top:0}.xl-ck{position:absolute;right:6px;top:6px;width:30px;height:30px;cursor:pointer}.xl-ck:hover{opacity:.6}.xl-cl{height:100%;overflow:scroll}.xl-cm{font-size:16px}");let r=/<h1\s+class="tcleft title">([\s\S]+?)<\/h1>\s*<table class='booklist'>([\S\s]+?)<\/table>/g,s=/\u300a([^\u300b]+)\u300b/,o=/<td class="time"><a href="([^"]+)" target="_blank">([\s\S]+?)<\/a><\/td>/g,c="https://www.92gushi.com/",a={icon:'<svg viewBox="0 0 1024 1024"><path fill="#ed6d00" d="M1012 262.3v-58.9h-32.5v616.8c-150.7 24.5-288.3 46.7-424.6 68.9.2.5 15.7 32.8 26 33l384.5-.1c16.8-.9 44.6-46.5 46.5-73.4V262.3z"/><path fill="#ed6d00" d="M684 128.8c-98.2 17.8-152.4 65.5-147.8 182.2l.1 540.2c189.9-73.2 388.8-57.7 388.8-57.7l-.3-53.3s.3-413.5.3-638.1c-88 9.2-165.5 13.1-241.1 26.7zM60.2 921.9l382.6.1c10.4-.3 25.9-33 25.9-33.1-136.3-22.1-272-44.3-422.7-68.9V203.5H12v643.3c.8 26.6 31.1 74.3 48.2 75.1zM468.7 889z"/><path fill="#ed6d00" d="M490.7 851.1l.1-540.2c4.7-116.7-49.7-164.4-147.8-182.2-75.6-13.6-153-17.4-241.1-26.8 0 224.5.3 638 .3 638l-.4 53.3c.1.2 199-15.3 388.9 57.9zm64.2 37.9v-.1z"/></svg>',appId:"story_detail",width:500,height:650,min:!0,close:!0,view:"~xl/plugins/story/detail"};export default l.View.extend({tmpl:(l,e,i,r,s,o,c,a)=>{let p,d,x,n,h,g,f=[],{error:b,books:u,selected:k}=l;if(b)p=[e(0,0,r(b))],f.push(...p);else{let l,s;p=[],x=[];for(let t=u.length,o=0;o<t;o++){let t=u[o];n=[],t.id==k&&(d="",l=t.links,d+=" ",s=t.title),h=[e(0,0,r(t.title))],g="xl-cb",t.id==k&&(g+=" xl-cc"),n.push(e("div",{"mx-click":t.id!=k&&i+"\x1e_cf({id:'"+a(t.id)+"'})",class:g},h)),x.push(...n)}p.push(e("div",t,x));for(let t=l.length,o=0;o<t;o++){let t=l[o];n=[e(0,0,r(t.text))],x=[e("div",{class:"xl-cd","mx-click":i+"\x1e_({link:'"+a(t.link)+"',title:'"+a(s)+"-"+a(t.text)+"'})"},n)],p.push(...x)}f.push(...p)}return e(i,0,f)},async render(){try{if(l.mark(this,"_aR")()){let t=await(async()=>{let t=await e.request(c,864e5,!0,"gb2312"),i=[];return t.replace(r,(t,e,r)=>{let a="",p=[];return e.replace(s,(t,l)=>a=l),r.replace(o,(t,l,e)=>(p.push({link:c+l,text:e}),t)),i.push({id:l.guid("b_"),title:a,links:p}),t}),i})();this.digest({selected:t[0].id,books:t})}}catch(t){this.digest({error:t})}},"_cf<click>"(t){let{id:l}=t.params;this.digest({selected:l})},"_<click>"(t){let{link:l,title:e}=t.params,r={...a,data:l,title:e};i._C(this,r)}});