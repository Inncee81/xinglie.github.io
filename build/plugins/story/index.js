let t={class:"xl-bN"};import l from"../../lib/magix.js";import e from"../../lib/agent.js";import i from"../../os/ctrl.js";l.applyStyle("xl-q",".xl-bN{height:28px;line-height:28px;padding:0 26px;background:#ddd;color:#333;position:-webkit-sticky;position:sticky;top:0}.xl-bO{float:left;padding:0 5px;cursor:pointer}.xl-bP{background:#fff}.xl-bQ{margin:8px;border-radius:4px;background:#fafafa;padding:3px 10px;cursor:pointer;float:left}.xl-bQ:hover{background:#e6e6e6}.xl-bR{padding:10px;overflow:scroll;box-sizing:border-box;height:100%}.xl-bS{font-weight:700;font-size:16px;padding:3px 10px;background:#f5f5f5}.xl-bT{padding:3px 30px;height:30px;line-height:30px;cursor:pointer}.xl-bT:hover{background:#fafafa}.xl-bU{filter:blur(10px)}.xl-bV{position:absolute;left:0;right:0;bottom:0;top:100%;background:rgba(0,0,0,.7333333333333333);color:#fff;padding:10px;word-break:break-all;transition:all .25s}.xl-bW{top:0}.xl-bX{position:absolute;right:6px;top:6px;width:30px;height:30px;cursor:pointer}.xl-bX:hover{opacity:.6}.xl-bY{height:100%;overflow:scroll}.xl-bZ{font-size:16px}");let o=/<h1\s+class="tcleft title">([\s\S]+?)<\/h1>\s*<table class='booklist'>([\S\s]+?)<\/table>/g,s=/\u300a([^\u300b]+)\u300b/,r=/<td class="time"><a href="([^"]+)" target="_blank">([\s\S]+?)<\/a><\/td>/g,a="https://www.92gushi.com/",p={icon:'<svg viewBox="0 0 1024 1024"><path fill="#ed6d00" d="M1012 262.3v-58.9h-32.5v616.8c-150.7 24.5-288.3 46.7-424.6 68.9.2.5 15.7 32.8 26 33l384.5-.1c16.8-.9 44.6-46.5 46.5-73.4V262.3z"/><path fill="#ed6d00" d="M684 128.8c-98.2 17.8-152.4 65.5-147.8 182.2l.1 540.2c189.9-73.2 388.8-57.7 388.8-57.7l-.3-53.3s.3-413.5.3-638.1c-88 9.2-165.5 13.1-241.1 26.7zM60.2 921.9l382.6.1c10.4-.3 25.9-33 25.9-33.1-136.3-22.1-272-44.3-422.7-68.9V203.5H12v643.3c.8 26.6 31.1 74.3 48.2 75.1zM468.7 889z"/><path fill="#ed6d00" d="M490.7 851.1l.1-540.2c4.7-116.7-49.7-164.4-147.8-182.2-75.6-13.6-153-17.4-241.1-26.8 0 224.5.3 638 .3 638l-.4 53.3c.1.2 199-15.3 388.9 57.9zm64.2 37.9v-.1z"/></svg>',appId:"story_detail",width:500,height:650,min:!0,close:!0,view:"~xl/plugins/story/detail"};export default l.View.extend({tmpl:(l,e,i,o,s,r,a,p)=>{let d,c,x,b,n,h,g=[],{error:f,books:u,selected:k}=l;if(f)d=[e(0,o(f))],g.push(...d);else{let l,s;d=[],x=[];for(let t=u.length,r=0;r<t;r+=1){let t=u[r];b=[],t.id==k&&(c="",l=t.links,c+=" ",s=t.title),n=[e(0,o(t.title))],h="xl-bO",t.id==k&&(h+=" xl-bP"),b.push(e("div",{"mx5-click":t.id!=k&&i+"\x1e_bV({id:'"+p(t.id)+"'})",class:h},n)),x.push(...b)}d.push(e("div",t,x));for(let t=l.length,r=0;r<t;r+=1){let t=l[r];b=[e(0,o(t.text))],x=[e("div",{class:"xl-bQ","mx5-click":i+"\x1e_bZ({link:'"+p(t.link)+"',title:'"+p(s)+"-"+p(t.text)+"'})"},b)],d.push(...x)}g.push(...d)}return e(i,0,g)},async render(){try{if(l.mark(this,"_aH")()){let t=await(async()=>{let t=await e.request(a,864e5,!0,"gb2312"),i=[];return t.replace(o,(t,e,o)=>{let p="",d=[];return e.replace(s,(t,l)=>p=l),o.replace(r,(t,l,e)=>(d.push({link:a+l,text:e}),t)),i.push({id:l.guid("b_"),title:p,links:d}),t}),i})();this.digest({selected:t[0].id,books:t})}}catch(t){this.digest({error:t})}},"_bV<click>"(t){let{id:l}=t.params;this.digest({selected:l})},"_bZ<click>"(t){let{link:l,title:e}=t.params,o={...p,data:l,title:e};i._C(this,o)}});