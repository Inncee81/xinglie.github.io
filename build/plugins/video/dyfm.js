/*!1.0.5 kooboy_li@163.com*/
let e={class:"xl-cL"},l={class:"xl-cN"},s={class:"xl-cO"},a={class:"xl-cP"},r={class:"xl-cV"};import t from"../../lib/magix.js";import i from"../../lib/agent.js";let c=/\.fm-discovery\{[\s\S]+?url\(([^()]+)\)[\s\S]+?<a\s+href="\/([^"]+)"\s+class="q"\s+data-toggle="tooltip"\s+title="[^"]+"\s+data-placement="top">([\S\s]+?)<\/a>[\s\S]+<a[^>]+?rel="nofollow"\s+href="([^"]+)">\s*(\u8c46\u74e3[\S\s]+?)<\/a>[\s\S]+<a[^>]+?rel="nofollow"\s+href="([^"]+)">\s*(IMDB[\S\s]+?)<\/a>[\s\S]+<p\s+class="x-kankan-desc">([\s\S]+?)<\/p>/,n=/<div\s+class="x-kankan-full-desc"\s+style="display:\s*none;">([\s\S]+?)<\/div>/;export default t.View.extend({tmpl:(t,i,c,n,o)=>{let d,m,p,x,h,f,g=[],{videoInfo:b,loading:k}=t;return d=[i("div",{class:"xl-cM",style:"background-image:url("+n(b.img)+");"})],p="",m=[i(0,0,p+=k?"\u5207\u6362\u4e2d...":"\u6362\u4e00\u6362")],d.push(i("button",{type:"button",class:"xl-cW xl-cs","mx-click":c+"\x1e_cl()"},m)),f=[i(0,0,n(b.name))],h=[i("a",{class:"xl-cQ xl-cR",href:n(b.detail),rel:"noopener noreferrer",target:"_blank"},f)],x=[i("div",a,h)],f=[i(0,0,"\u817e\u8baf")],h=[i("a",{href:"https://v.qq.com/x/search/?q="+o(b.name),class:"xl-cQ xl-cU xl-cS",rel:"noopener noreferrer",title:"\u4f7f\u7528\u817e\u8baf\u641c\u7d22"+n(b.name),target:"_blank"},f)],f=[i(0,0,"\u7231\u5947\u827a")],h.push(i("a",{href:"http://so.iqiyi.com/so/q_"+o(b.name),class:"xl-cQ xl-cU xl-cS",rel:"noopener noreferrer",title:"\u4f7f\u7528\u7231\u5947\u4e16\u641c\u7d22"+n(b.name),target:"_blank"},f)),f=[i(0,0,n(b.dbScore))],h.push(i("a",{href:n(b.dbLink),rel:"noopener noreferrer",target:"_blank",class:"xl-cQ xl-cU xl-cT"},f)),f=[i(0,0,n(b.imdbScore))],h.push(i("a",{href:n(b.imdbLink),rel:"noopener noreferrer",target:"_blank",class:"xl-cQ xl-cU xl-cT"},f)),x.push(i("div",r,h)),m=[i("div",s,x)],x=[i(0,1,n(b.desc))],m.push(i("div",0,x)),d.push(i("div",l,m)),g.push(i("div",e,d)),i(c,0,g)},async render(){try{let e=t.mark(this,"_aR"),l=await i.request("http://dianying.fm/",0,!0);if(e()){let e={img:"",detail:"",name:"",dbLink:"",dbScore:"",imdbLink:"",imdbScore:"",desc:""};l.replace(c,(l,s,a,r,t,i,c,o,d)=>(e.img=s,e.detail="http://dianying.fm/"+a,e.name=r.trim(),e.dbLink=t,e.dbScore=i.trim(),e.imdbLink=c,e.imdbScore=o.trim(),e.desc=d.trim(),d.replace(n,(l,s)=>(e.desc=s.trim(),l)),l)),this.digest({loading:!1,videoInfo:e})}}catch(e){alert(e),this.set({loading:!1})}},"_cl<click>"(){this.get("loading")||(this.digest({loading:!0}),this.render())}});